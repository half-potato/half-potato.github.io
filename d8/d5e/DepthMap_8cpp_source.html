<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LSD SLAM: src/DepthEstimation/DepthMap.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LSD SLAM
   &#160;<span id="projectnumber">1.00</span>
   </div>
   <div id="projectbrief">A Direct monocular SLAM method</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_ab5d75ad8c66551d10c4965d9af7e3ec.html">src</a></li><li class="navelem"><a class="el" href="../../dir_9d3713884cd15a71aa79ab8693b359da.html">DepthEstimation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">DepthMap.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d8/d5e/DepthMap_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dbe/DepthMap_8h.html">DepthEstimation/DepthMap.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;opencv2/imgproc/imgproc.hpp&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d60/settings_8h.html">util/settings.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/dab/DepthMapPixelHypothesis_8h.html">DepthEstimation/DepthMapPixelHypothesis.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/db3/Frame_8h.html">DataStructures/Frame.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/dd7/globalFuncs_8h.html">util/globalFuncs.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d3f/ImageDisplay_8h.html">IOWrapper/ImageDisplay.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d3b/KeyFrameGraph_8h.html">GlobalMapping/KeyFrameGraph.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span>lsd_slam</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aa2135ac4d1e7a39b3033d880441f7834">   41</a></span>&#160;<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aa2135ac4d1e7a39b3033d880441f7834">DepthMap::DepthMap</a>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keyword">const</span> Eigen::Matrix3f&amp; K)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    width = w;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    height = h;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    activeKeyFrame = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    activeKeyFrameIsReactivated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    otherDepthMap = <span class="keyword">new</span> <a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>[width*height];</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    currentDepthMap = <span class="keyword">new</span> <a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>[width*height];</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    validityIntegralBuffer = (<span class="keywordtype">int</span>*)Eigen::internal::aligned_malloc(width*height*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a> = cv::Mat(h,w, CV_8UC3);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af4b1dbbafb28400c67581b32f39e3c65">debugImageHypothesisPropagation</a> = cv::Mat(h,w, CV_8UC3);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">debugImageStereoLines</a> = cv::Mat(h,w, CV_8UC3);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">debugImageDepth</a> = cv::Mat(h,w, CV_8UC3);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    this-&gt;K = K;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    fx = K(0,0);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    fy = K(1,1);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    cx = K(0,2);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    cy = K(1,2);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    KInv = K.inverse();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    fxi = KInv(0,0);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    fyi = KInv(1,1);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    cxi = KInv(0,2);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    cyi = KInv(1,2);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab8fc38eab2fd508e7fca49b58787b687">reset</a>();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a0293920188f70a06ec1e53f6f127ff12">msUpdate</a> =  <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad639f2fda59ef3ceeb6604853968efd3">msCreate</a> =  <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab185dd9f3fc27093ecf093926c4a6a5e">msFinalize</a> = 0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8078cd87bf8b167bd24216291bc0b340">msObserve</a> =  <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> =  <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8e425cd5c9a68bbb156cb5d7e67c6d4d">msPropagate</a> =  <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a> =  <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a> = 0;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    gettimeofday(&amp;<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a23c23f50eb70b90fd4ec83a7cc056cd9">lastHzUpdate</a>, NULL);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3328c02e1478f7959c5517d98408e9c8">nUpdate</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a65b604326ce1a5e9472715dbe2c8ed6f">nCreate</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#acb27b62a7248eb9a108adcef78541aff">nFinalize</a> = 0;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a86997fec300a6e9f1646eb1f073d91a4">nObserve</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">nRegularize</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a7477c29680584827e22336df0604ba9d">nPropagate</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad296834582dab62c4621eac896c30bee">nFillHoles</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a06395761fbe5b73f2e2cd43095cdbde1">nSetDepth</a> = 0;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a131839c5289fea45b006d9177bab12aa">nAvgUpdate</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aed7adc9d8d2112785b63eef9899cb1cd">nAvgCreate</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab39ca230ecaf2395bcf801868a67da3f">nAvgFinalize</a> = 0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a60e43a7f852d4c2d2d32eb47c44168e1">nAvgObserve</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3ec6d916f8712382ba9052c00db98148">nAvgRegularize</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a75f06d356632124077ea0559f44185d9">nAvgPropagate</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a66431a18987966493cb7796d55c0162b">nAvgFillHoles</a> = <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a01b2c6e4c011b44a98b50bfbf8d91ddb">nAvgSetDepth</a> = 0;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a82037faec3cabf13bf96976c8076735e">   85</a></span>&#160;<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a82037faec3cabf13bf96976c8076735e">DepthMap::~DepthMap</a>()</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span>(activeKeyFrame != 0)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        activeKeyFramelock.unlock();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.release();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af4b1dbbafb28400c67581b32f39e3c65">debugImageHypothesisPropagation</a>.release();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">debugImageStereoLines</a>.release();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">debugImageDepth</a>.release();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">delete</span>[] otherDepthMap;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">delete</span>[] currentDepthMap;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    Eigen::internal::aligned_free((<span class="keywordtype">void</span>*)validityIntegralBuffer);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab8fc38eab2fd508e7fca49b58787b687">  102</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab8fc38eab2fd508e7fca49b58787b687">DepthMap::reset</a>()</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>* pt = otherDepthMap+width*height-1; pt &gt;= otherDepthMap; pt--)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        pt-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>* pt = currentDepthMap+width*height-1; pt &gt;= currentDepthMap; pt--)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        pt-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keywordtype">void</span> DepthMap::observeDepthRow(<span class="keywordtype">int</span> yMin, <span class="keywordtype">int</span> yMax, <a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html">RunningStats</a>* stats)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* keyFrameMaxGradBuf = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0b26845d846249e909e6ab0adc022ebf">maxGradients</a>(0);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">int</span> successes = 0;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=yMin;y&lt;yMax; y++)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=3;x&lt;width-3;x++)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordtype">int</span> idx = x+y*width;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>* target = currentDepthMap+idx;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordtype">bool</span> hasHypothesis = target-&gt;<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#aba28a1bf8203d9e0e323b9015d4ac425">isValid</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="comment">// ======== 1. check absolute grad =========</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">if</span>(hasHypothesis &amp;&amp; keyFrameMaxGradBuf[idx] &lt; <a class="code" href="../../de/d60/settings_8h.html#a38c58845d2acabed5449cf3532734df0">MIN_ABS_GRAD_DECREASE</a>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                target-&gt;<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#aba28a1bf8203d9e0e323b9015d4ac425">isValid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span>(keyFrameMaxGradBuf[idx] &lt; <a class="code" href="../../de/d60/settings_8h.html#a9706e982f42399b3f4abedbf4cf9aaa1">MIN_ABS_GRAD_CREATE</a> || target-&gt;<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a27273a9266af3c4fb91147febeae020a">blacklisted</a> &lt; <a class="code" href="../../de/d60/settings_8h.html#a6218447cb39a36244ad870b53ceaafd0">MIN_BLACKLIST</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordtype">bool</span> success;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span>(!hasHypothesis)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                success = observeDepthCreate(x, y, idx, stats);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                success = observeDepthUpdate(x, y, idx, keyFrameMaxGradBuf, stats);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">if</span>(success)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                successes++;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keywordtype">void</span> DepthMap::observeDepth()</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a83e8ffca4304e073cb421de05007f15d">threadReducer</a>.<a class="code" href="../../de/d11/classlsd__slam_1_1IndexThreadReduce.html#ab2476f8c783eed60926b7e161cf2e0fb">reduce</a>(boost::bind(&amp;DepthMap::observeDepthRow, <span class="keyword">this</span>, _1, _2, _3), 3, height-3, 10);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#a87de387858263be565ed5a0ea076bb8b">printObserveStatistics</a>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        printf(<span class="stringliteral">&quot;OBSERVE (%d): %d / %d created; %d / %d updated; %d skipped; %d init-blacklisted\n&quot;</span>,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(),</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad667a1e778a9814d465947e40851da1f">num_observe_created</a>,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa7268f6ac7e48aa2f95ed259b475fad4">num_observe_create_attempted</a>,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#af69ecb1d5574427ce9ad6c8f6d1541fa">num_observe_updated</a>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ab448a7720cc9f5eac710b4885fe76ab5">num_observe_update_attempted</a>,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0dcc58a8dc867b4d2996e373323951c2">num_observe_skip_alreadyGood</a>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa5edbc8eae06bb767a57b1be4278189b">num_observe_blacklisted</a></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        );</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#a66d43d94167308e80a8814dcaaecf91d">printObservePurgeStatistics</a>)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        printf(<span class="stringliteral">&quot;OBS-PRG (%d): Good: %d; inconsistent: %d; notfound: %d; oob: %d; failed: %d; addSkip: %d;\n&quot;</span>,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(),</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a4406c1e00b408b0276d50dcb2176cc74">num_observe_good</a>,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a010d3b33ee98a7e0351849b51b44f2a9">num_observe_inconsistent</a>,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a7d9ef4d92788bb6dd693d21d05bd98ed">num_observe_notfound</a>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a5c4e688e7513e34dd120114104335205">num_observe_skip_oob</a>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a28d3143c38eb4d6e35bee6c8270faa2c">num_observe_skip_fail</a>,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a85ceddca691c6b669c84d3d0d274fc1f">num_observe_addSkip</a></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        );</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keywordtype">bool</span> DepthMap::makeAndCheckEPL(<span class="keyword">const</span> <span class="keywordtype">int</span> x, <span class="keyword">const</span> <span class="keywordtype">int</span> y, <span class="keyword">const</span> Frame* <span class="keyword">const</span> ref, <span class="keywordtype">float</span>* pepx, <span class="keywordtype">float</span>* pepy, RunningStats* <span class="keyword">const</span> stats)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">int</span> idx = x+y*width;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// ======= make epl ========</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// calculate the plane spanned by the two camera centers and the point (x,y,1)</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// intersect it with the keyframe&#39;s image plane (at depth=1)</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">float</span> epx = - fx * ref-&gt;thisToOther_t[0] + ref-&gt;thisToOther_t[2]*(x - cx);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">float</span> epy = - fy * ref-&gt;thisToOther_t[1] + ref-&gt;thisToOther_t[2]*(y - cy);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span>(isnanf(epx+epy))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// ======== check epl length =========</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">float</span> eplLengthSquared = epx*epx+epy*epy;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span>(eplLengthSquared &lt; <a class="code" href="../../de/d60/settings_8h.html#ad58e83a96292a9255350da95c778bd2e">MIN_EPL_LENGTH_SQUARED</a>)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_skipped_small_epl++;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// ===== check epl-grad magnitude ======</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">float</span> gx = activeKeyFrameImageData[idx+1] - activeKeyFrameImageData[idx-1];</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">float</span> gy = activeKeyFrameImageData[idx+width] - activeKeyFrameImageData[idx-width];</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">float</span> eplGradSquared = gx * epx + gy * epy;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    eplGradSquared = eplGradSquared*eplGradSquared / eplLengthSquared;  <span class="comment">// square and norm with epl-length</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span>(eplGradSquared &lt; <a class="code" href="../../de/d60/settings_8h.html#af8c6f6086621142925a9b0cdfdb6a642">MIN_EPL_GRAD_SQUARED</a>)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_skipped_small_epl_grad++;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// ===== check epl-grad angle ======</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span>(eplGradSquared / (gx*gx+gy*gy) &lt; <a class="code" href="../../de/d60/settings_8h.html#aeb0fddac678acca13a8cd42c752e928d">MIN_EPL_ANGLE_SQUARED</a>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_skipped_small_epl_angle++;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// ===== DONE - return &quot;normalized&quot; epl =====</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">float</span> fac = <a class="code" href="../../de/d60/settings_8h.html#a0fbb1ed2b6428a6d1387f922ed5d8aec">GRADIENT_SAMPLE_DIST</a> / sqrt(eplLengthSquared);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    *pepx = epx * fac;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    *pepy = epy * fac;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keywordtype">bool</span> DepthMap::observeDepthCreate(<span class="keyword">const</span> <span class="keywordtype">int</span> &amp;x, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;y, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;idx, RunningStats* <span class="keyword">const</span> &amp;stats)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    DepthMapPixelHypothesis* target = currentDepthMap+idx;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    Frame* refFrame = activeKeyFrameIsReactivated ? newest_referenceFrame : oldest_referenceFrame;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span>(refFrame-&gt;getTrackingParent() == activeKeyFrame)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordtype">bool</span>* wasGoodDuringTracking = refFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#adb19bd5898e7d6e8ceb9a826096d166e">refPixelWasGoodNoCreate</a>();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span>(wasGoodDuringTracking != 0 &amp;&amp; !wasGoodDuringTracking[(x &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>) + (width &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>)*(y &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>)])</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(255,0,0); <span class="comment">// BLUE for SKIPPED NOT GOOD TRACKED</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">float</span> epx, epy;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">bool</span> isGood = makeAndCheckEPL(x, y, refFrame, &amp;epx, &amp;epy, stats);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span>(!isGood) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_create_attempted++;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">float</span> new_u = x;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">float</span> new_v = y;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">float</span> result_idepth, result_var, result_eplLength;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">float</span> error = doLineStereo(</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            new_u,new_v,epx,epy,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            0.0f, 1.0f, 1.0f/<a class="code" href="../../de/d60/settings_8h.html#a3754aaecbdf355ecead62cc3a34fb7b9">MIN_DEPTH</a>,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            refFrame, refFrame-&gt;image(0),</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            result_idepth, result_var, result_eplLength, stats);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span>(error == -3 || error == -2)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        target-&gt;blacklisted--;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_blacklisted++;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span>(error &lt; 0 || result_var &gt; <a class="code" href="../../de/d60/settings_8h.html#adf2d7fec5bf033328e64fdedea22e341">MAX_VAR</a>)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    result_idepth = <a class="code" href="../../de/d60/settings_8h.html#a1e9db080b35f8245282a5531065d5635">UNZERO</a>(result_idepth);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// add hypothesis</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    *target = DepthMapPixelHypothesis(</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            result_idepth,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            result_var,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <a class="code" href="../../de/d60/settings_8h.html#ab476c2aba408ab93d1b03c474b6590e7">VALIDITY_COUNTER_INITIAL_OBSERVE</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(255,255,255); <span class="comment">// white for GOT CREATED</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_created++;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keywordtype">bool</span> DepthMap::observeDepthUpdate(<span class="keyword">const</span> <span class="keywordtype">int</span> &amp;x, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;y, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;idx, <span class="keyword">const</span> <span class="keywordtype">float</span>* keyFrameMaxGradBuf, RunningStats* <span class="keyword">const</span> &amp;stats)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    DepthMapPixelHypothesis* target = currentDepthMap+idx;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    Frame* refFrame;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span>(!activeKeyFrameIsReactivated)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)target-&gt;nextStereoFrameMinID - referenceFrameByID_offset &gt;= (<span class="keywordtype">int</span>)referenceFrameByID.size())</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(0,255,0);  <span class="comment">// GREEN FOR skip</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_skip_alreadyGood++;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)target-&gt;nextStereoFrameMinID - referenceFrameByID_offset &lt; 0)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            refFrame = oldest_referenceFrame;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            refFrame = referenceFrameByID[(int)target-&gt;nextStereoFrameMinID - referenceFrameByID_offset];</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        refFrame = newest_referenceFrame;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span>(refFrame-&gt;getTrackingParent() == activeKeyFrame)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordtype">bool</span>* wasGoodDuringTracking = refFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#adb19bd5898e7d6e8ceb9a826096d166e">refPixelWasGoodNoCreate</a>();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span>(wasGoodDuringTracking != 0 &amp;&amp; !wasGoodDuringTracking[(x &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>) + (width &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>)*(y &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>)])</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(255,0,0); <span class="comment">// BLUE for SKIPPED NOT GOOD TRACKED</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">float</span> epx, epy;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordtype">bool</span> isGood = makeAndCheckEPL(x, y, refFrame, &amp;epx, &amp;epy, stats);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span>(!isGood) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// which exact point to track, and where from.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">float</span> sv = sqrt(target-&gt;idepth_var_smoothed);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">float</span> min_idepth = target-&gt;idepth_smoothed - sv*<a class="code" href="../../de/d60/settings_8h.html#a06c0f508be43bd32e10f19a3173172e1">STEREO_EPL_VAR_FAC</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordtype">float</span> max_idepth = target-&gt;idepth_smoothed + sv*<a class="code" href="../../de/d60/settings_8h.html#a06c0f508be43bd32e10f19a3173172e1">STEREO_EPL_VAR_FAC</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span>(min_idepth &lt; 0) min_idepth = 0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span>(max_idepth &gt; 1/<a class="code" href="../../de/d60/settings_8h.html#a3754aaecbdf355ecead62cc3a34fb7b9">MIN_DEPTH</a>) max_idepth = 1/<a class="code" href="../../de/d60/settings_8h.html#a3754aaecbdf355ecead62cc3a34fb7b9">MIN_DEPTH</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    stats-&gt;num_observe_update_attempted++;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">float</span> result_idepth, result_var, result_eplLength;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">float</span> error = doLineStereo(</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            x,y,epx,epy,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            min_idepth, target-&gt;idepth_smoothed ,max_idepth,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            refFrame, refFrame-&gt;image(0),</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            result_idepth, result_var, result_eplLength, stats);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">float</span> diff = result_idepth - target-&gt;idepth_smoothed;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// if oob: (really out of bounds)</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span>(error == -1)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">// do nothing, pixel got oob, but is still in bounds in original. I will want to try again.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_skip_oob++;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(0,0,255);  <span class="comment">// RED FOR OOB</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// if just not good for stereo (e.g. some inf / nan occured; has inconsistent minimum; ..)</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(error == -2)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_skip_fail++;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(255,0,255);    <span class="comment">// PURPLE FOR NON-GOOD</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        target-&gt;validity_counter -= <a class="code" href="../../de/d60/settings_8h.html#a63d2170a6d2d11705d1afc36b79df4bd">VALIDITY_COUNTER_DEC</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">if</span>(target-&gt;validity_counter &lt; 0) target-&gt;validity_counter = 0;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        target-&gt;nextStereoFrameMinID = 0;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        target-&gt;idepth_var *= <a class="code" href="../../de/d60/settings_8h.html#a912fe4a9618fb40818285cd2ebdccbef">FAIL_VAR_INC_FAC</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">if</span>(target-&gt;idepth_var &gt; MAX_VAR)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            target-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            target-&gt;blacklisted--;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// if not found (error too high)</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(error == -3)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_notfound++;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(0,0,0);    <span class="comment">// BLACK FOR big not-found</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(error == -4)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(0,0,0);    <span class="comment">// BLACK FOR big arithmetic error</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// if inconsistent</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#a933a91009dd680b577b4cf13cab7761d">DIFF_FAC_OBSERVE</a>*diff*diff &gt; result_var + target-&gt;idepth_var_smoothed)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_inconsistent++;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(255,255,0);    <span class="comment">// Turkoise FOR big inconsistent</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        target-&gt;idepth_var *= <a class="code" href="../../de/d60/settings_8h.html#a912fe4a9618fb40818285cd2ebdccbef">FAIL_VAR_INC_FAC</a>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">if</span>(target-&gt;idepth_var &gt; MAX_VAR) target-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="comment">// one more successful observation!</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_good++;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_updated++;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="comment">// do textbook ekf update:</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// increase var by a little (prediction-uncertainty)</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordtype">float</span> id_var = target-&gt;idepth_var*<a class="code" href="../../de/d60/settings_8h.html#adf585a408cadc4e3eb8f8fb3cebd9669">SUCC_VAR_INC_FAC</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">// update var with observation</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordtype">float</span> w = result_var / (result_var + id_var);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordtype">float</span> new_idepth = (1-w)*result_idepth + w*target-&gt;idepth;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        target-&gt;idepth = <a class="code" href="../../de/d60/settings_8h.html#a1e9db080b35f8245282a5531065d5635">UNZERO</a>(new_idepth);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="comment">// variance can only decrease from observation; never increase.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        id_var = id_var * w;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span>(id_var &lt; target-&gt;idepth_var)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            target-&gt;idepth_var = id_var;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// increase validity!</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        target-&gt;validity_counter += <a class="code" href="../../de/d60/settings_8h.html#a2ad212f2f1efe71ffd14e5c3568ab0bb">VALIDITY_COUNTER_INC</a>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordtype">float</span> absGrad = keyFrameMaxGradBuf[idx];</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span>(target-&gt;validity_counter &gt; <a class="code" href="../../de/d60/settings_8h.html#a1c49e12f8ff295dc9807fc2de2eef254">VALIDITY_COUNTER_MAX</a>+absGrad*(<a class="code" href="../../de/d60/settings_8h.html#aaaff1d95bfed394db16c5f6c7a2868b3">VALIDITY_COUNTER_MAX_VARIABLE</a>)/255.0f)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            target-&gt;validity_counter = <a class="code" href="../../de/d60/settings_8h.html#a1c49e12f8ff295dc9807fc2de2eef254">VALIDITY_COUNTER_MAX</a>+absGrad*(<a class="code" href="../../de/d60/settings_8h.html#aaaff1d95bfed394db16c5f6c7a2868b3">VALIDITY_COUNTER_MAX_VARIABLE</a>)/255.0f;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="comment">// increase Skip!</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">if</span>(result_eplLength &lt; <a class="code" href="../../de/d60/settings_8h.html#a4a8bf201d526db90c23b6129ff94974c">MIN_EPL_LENGTH_CROP</a>)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordtype">float</span> inc = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0e33cc989142a9266f582df4931fbd52">numFramesTrackedOnThis</a> / (float)(activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a722bd8b07e962b6de142519f38405628">numMappedOnThis</a>+5);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">if</span>(inc &lt; 3) inc = 3;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            inc +=  ((int)(result_eplLength*10000)%2);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_observe_addSkip++;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">if</span>(result_eplLength &lt; 0.5*<a class="code" href="../../de/d60/settings_8h.html#a4a8bf201d526db90c23b6129ff94974c">MIN_EPL_LENGTH_CROP</a>)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                inc *= 3;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            target-&gt;nextStereoFrameMinID = refFrame-&gt;id() + inc;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>.at&lt;cv::Vec3b&gt;(y, x) = cv::Vec3b(0,255,255); <span class="comment">// yellow for GOT UPDATED</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="keywordtype">void</span> DepthMap::propagateDepth(Frame* new_keyframe)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;{</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad01412ac55c0834f2455e08ed2986438">num_prop_removed_out_of_bounds</a> = 0;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a2f7e88ddbe374e4fe52014eac1364578">num_prop_removed_colorDiff</a> = 0;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a7391094f28eadefcb91a647268373ea2">num_prop_removed_validity</a> = 0;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa80854933bf3b6003d29dfc0ced115e2">num_prop_grad_decreased</a> = 0;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a673740ae01dbcb72cb42cfc0f91f0521">num_prop_color_decreased</a> = 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad227bc49e8e2a12fe457a4d2eae5a858">num_prop_attempts</a> = 0;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a91c90e504f46cfd163f8a43b30d40a96">num_prop_occluded</a> = 0;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a5f7e7a10b57ff2d46296544334cd482a">num_prop_created</a> = 0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac2fd244f93035dd6dae9fa9fd2f0226c">num_prop_merged</a> = 0;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span>(new_keyframe-&gt;getTrackingParent() != activeKeyFrame)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        printf(<span class="stringliteral">&quot;WARNING: propagating depth from frame %d to %d, which was tracked on a different frame (%d).\nWhile this should work, it is not recommended.&quot;</span>,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(), new_keyframe-&gt;id(),</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                new_keyframe-&gt;getTrackingParent()-&gt;id());</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// wipe depthmap</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">for</span>(DepthMapPixelHypothesis* pt = otherDepthMap+width*height-1; pt &gt;= otherDepthMap; pt--)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        pt-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        pt-&gt;blacklisted = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// re-usable values.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html">SE3</a> oldToNew_SE3 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#a6ab8d718a8bf6c1c85541b8948bd5248">se3FromSim3</a>(new_keyframe-&gt;pose-&gt;thisToParent_raw).<a class="code" href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">inverse</a>();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    Eigen::Vector3f trafoInv_t = oldToNew_SE3.<a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html#a1bfd300de4529a2f6ba0ff5baecea98e">translation</a>().cast&lt;<span class="keywordtype">float</span>&gt;();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    Eigen::Matrix3f trafoInv_R = oldToNew_SE3.<a class="code" href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#adbfc9d61a4a27f9b5e73fa22519e61de">rotationMatrix</a>().matrix().cast&lt;<span class="keywordtype">float</span>&gt;();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span>* trackingWasGood = new_keyframe-&gt;getTrackingParent() == activeKeyFrame ? new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#adb19bd5898e7d6e8ceb9a826096d166e">refPixelWasGoodNoCreate</a>() : 0;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* activeKFImageData = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* newKFMaxGrad = new_keyframe-&gt;maxGradients(0);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* newKFImageData = new_keyframe-&gt;image(0);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// go through all pixels of OLD image, propagating forwards.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;height;y++)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=0;x&lt;width;x++)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            DepthMapPixelHypothesis* source = currentDepthMap + x + y*width;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">if</span>(!source-&gt;isValid)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad227bc49e8e2a12fe457a4d2eae5a858">num_prop_attempts</a>++;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            Eigen::Vector3f pn = (trafoInv_R * Eigen::Vector3f(x*fxi + cxi,y*fyi + cyi,1.0f)) / source-&gt;idepth_smoothed + trafoInv_t;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordtype">float</span> new_idepth = 1.0f / pn[2];</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="keywordtype">float</span> u_new = pn[0]*new_idepth*fx + cx;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordtype">float</span> v_new = pn[1]*new_idepth*fy + cy;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="comment">// check if still within image, if not: DROP.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="keywordflow">if</span>(!(u_new &gt; 2.1f &amp;&amp; v_new &gt; 2.1f &amp;&amp; u_new &lt; width-3.1f &amp;&amp; v_new &lt; height-3.1f))</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad01412ac55c0834f2455e08ed2986438">num_prop_removed_out_of_bounds</a>++;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordtype">int</span> newIDX = (int)(u_new+0.5f) + ((int)(v_new+0.5f))*width;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordtype">float</span> destAbsGrad = newKFMaxGrad[newIDX];</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">if</span>(trackingWasGood != 0)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordflow">if</span>(!trackingWasGood[(x &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>) + (width &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>)*(y &gt;&gt; <a class="code" href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a>)]</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                    || destAbsGrad &lt; <a class="code" href="../../de/d60/settings_8h.html#a38c58845d2acabed5449cf3532734df0">MIN_ABS_GRAD_DECREASE</a>)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a2f7e88ddbe374e4fe52014eac1364578">num_prop_removed_colorDiff</a>++;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <span class="keywordtype">float</span> sourceColor = activeKFImageData[x + y*width];</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordtype">float</span> destColor = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(newKFImageData, u_new, v_new, width);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="keywordtype">float</span> residual = destColor - sourceColor;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                <span class="keywordflow">if</span>(residual*residual / (<a class="code" href="../../de/d60/settings_8h.html#ab2589c427511fecd424d39d38b1cd29d">MAX_DIFF_CONSTANT</a> + <a class="code" href="../../de/d60/settings_8h.html#ae477fa0a9b2f7606922f4b01cc9f016b">MAX_DIFF_GRAD_MULT</a>*destAbsGrad*destAbsGrad) &gt; 1.0f || destAbsGrad &lt; <a class="code" href="../../de/d60/settings_8h.html#a38c58845d2acabed5449cf3532734df0">MIN_ABS_GRAD_DECREASE</a>)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a2f7e88ddbe374e4fe52014eac1364578">num_prop_removed_colorDiff</a>++;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            DepthMapPixelHypothesis* targetBest = otherDepthMap +  newIDX;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="comment">// large idepth = point is near = large increase in variance.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="comment">// small idepth = point is far = small increase in variance.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordtype">float</span> idepth_ratio_4 = new_idepth / source-&gt;<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a82ac6c0b56d05a755373fdf23a9cacb2">idepth_smoothed</a>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            idepth_ratio_4 *= idepth_ratio_4;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            idepth_ratio_4 *= idepth_ratio_4;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="keywordtype">float</span> new_var =idepth_ratio_4*source-&gt;idepth_var;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="comment">// check for occlusion</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">if</span>(targetBest-&gt;isValid)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <span class="comment">// if they occlude one another, one gets removed.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                <span class="keywordtype">float</span> diff = targetBest-&gt;idepth - new_idepth;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#a257281b7f2f932130de8d98661b1e5b6">DIFF_FAC_PROP_MERGE</a>*diff*diff &gt;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    new_var +</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    targetBest-&gt;idepth_var)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <span class="keywordflow">if</span>(new_idepth &lt; targetBest-&gt;idepth)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a91c90e504f46cfd163f8a43b30d40a96">num_prop_occluded</a>++;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                    }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a91c90e504f46cfd163f8a43b30d40a96">num_prop_occluded</a>++;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                        targetBest-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordflow">if</span>(!targetBest-&gt;isValid)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a5f7e7a10b57ff2d46296544334cd482a">num_prop_created</a>++;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                *targetBest = DepthMapPixelHypothesis(</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                        new_idepth,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                        new_var,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                        source-&gt;validity_counter);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac2fd244f93035dd6dae9fa9fd2f0226c">num_prop_merged</a>++;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="comment">// merge idepth ekf-style</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordtype">float</span> w = new_var / (targetBest-&gt;idepth_var + new_var);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordtype">float</span> merged_new_idepth = w*targetBest-&gt;idepth + (1.0f-w)*new_idepth;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="comment">// merge validity</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="keywordtype">int</span> merged_validity = source-&gt;validity_counter + targetBest-&gt;validity_counter;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <span class="keywordflow">if</span>(merged_validity &gt; <a class="code" href="../../de/d60/settings_8h.html#a1c49e12f8ff295dc9807fc2de2eef254">VALIDITY_COUNTER_MAX</a>+(<a class="code" href="../../de/d60/settings_8h.html#aaaff1d95bfed394db16c5f6c7a2868b3">VALIDITY_COUNTER_MAX_VARIABLE</a>))</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    merged_validity = <a class="code" href="../../de/d60/settings_8h.html#a1c49e12f8ff295dc9807fc2de2eef254">VALIDITY_COUNTER_MAX</a>+(<a class="code" href="../../de/d60/settings_8h.html#aaaff1d95bfed394db16c5f6c7a2868b3">VALIDITY_COUNTER_MAX_VARIABLE</a>);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                *targetBest = DepthMapPixelHypothesis(</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                        merged_new_idepth,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                        1.0f/(1.0f/targetBest-&gt;idepth_var + 1.0f/new_var),</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                        merged_validity);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// swap!</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    std::swap(currentDepthMap, otherDepthMap);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#af7cbf86575ab7581f6299cad045e311b">printPropagationStatistics</a>)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        printf(<span class="stringliteral">&quot;PROPAGATE: %d: %d drop (%d oob, %d color); %d created; %d merged; %d occluded. %d col-dec, %d grad-dec.\n&quot;</span>,</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad227bc49e8e2a12fe457a4d2eae5a858">num_prop_attempts</a>,</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a7391094f28eadefcb91a647268373ea2">num_prop_removed_validity</a> + <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad01412ac55c0834f2455e08ed2986438">num_prop_removed_out_of_bounds</a> + <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a2f7e88ddbe374e4fe52014eac1364578">num_prop_removed_colorDiff</a>,</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad01412ac55c0834f2455e08ed2986438">num_prop_removed_out_of_bounds</a>,</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a2f7e88ddbe374e4fe52014eac1364578">num_prop_removed_colorDiff</a>,</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a5f7e7a10b57ff2d46296544334cd482a">num_prop_created</a>,</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac2fd244f93035dd6dae9fa9fd2f0226c">num_prop_merged</a>,</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a91c90e504f46cfd163f8a43b30d40a96">num_prop_occluded</a>,</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a673740ae01dbcb72cb42cfc0f91f0521">num_prop_color_decreased</a>,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa80854933bf3b6003d29dfc0ced115e2">num_prop_grad_decreased</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keywordtype">void</span> DepthMap::regularizeDepthMapFillHolesRow(<span class="keywordtype">int</span> yMin, <span class="keywordtype">int</span> yMax, RunningStats* stats)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;{</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// =========== regularize fill holes</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* keyFrameMaxGradBuf = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0b26845d846249e909e6ab0adc022ebf">maxGradients</a>(0);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=yMin; y&lt;yMax; y++)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=3;x&lt;width-2;x++)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordtype">int</span> idx = x+y*width;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            DepthMapPixelHypothesis* dest = otherDepthMap + idx;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">if</span>(dest-&gt;isValid) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="keywordflow">if</span>(keyFrameMaxGradBuf[idx]&lt;<a class="code" href="../../de/d60/settings_8h.html#a38c58845d2acabed5449cf3532734df0">MIN_ABS_GRAD_DECREASE</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordtype">int</span>* io = validityIntegralBuffer + idx;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <span class="keywordtype">int</span> val = io[2+2*width] - io[2-3*width] - io[-3+2*width] + io[-3-3*width];</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordflow">if</span>((dest-&gt;blacklisted &gt;= <a class="code" href="../../de/d60/settings_8h.html#a6218447cb39a36244ad870b53ceaafd0">MIN_BLACKLIST</a> &amp;&amp; val &gt; <a class="code" href="../../de/d60/settings_8h.html#afd365e2f7fb721ad9a636989102e5164">VAL_SUM_MIN_FOR_CREATE</a>) || val &gt; <a class="code" href="../../de/d60/settings_8h.html#a5f0b23e85b9f1f3aab9e06b538c3c4bf">VAL_SUM_MIN_FOR_UNBLACKLIST</a>)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <span class="keywordtype">float</span> sumIdepthObs = 0, sumIVarObs = 0;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="keywordtype">int</span> num = 0;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                DepthMapPixelHypothesis* s1max = otherDepthMap + (x-2) + (y+3)*width;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                <span class="keywordflow">for</span> (DepthMapPixelHypothesis* s1 = otherDepthMap + (x-2) + (y-2)*width; s1 &lt; s1max; s1+=width)</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                    <span class="keywordflow">for</span>(DepthMapPixelHypothesis* source = s1; source &lt; s1+5; source++)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        <span class="keywordflow">if</span>(!source-&gt;isValid) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                        sumIdepthObs += source-&gt;<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#abfc19276c22e1c4fae82f61054a4579f">idepth</a> /source-&gt;idepth_var;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                        sumIVarObs += 1.0f/source-&gt;idepth_var;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                        num++;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <span class="keywordtype">float</span> idepthObs = sumIdepthObs / sumIVarObs;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                idepthObs = <a class="code" href="../../de/d60/settings_8h.html#a1e9db080b35f8245282a5531065d5635">UNZERO</a>(idepthObs);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                currentDepthMap[idx] =</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    DepthMapPixelHypothesis(</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                        idepthObs,</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                        <a class="code" href="../../de/d60/settings_8h.html#a785860383d41a576bfae9bb54354b84e">VAR_RANDOM_INIT_INITIAL</a>,</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                        0);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_reg_created++;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="keywordtype">void</span> DepthMap::regularizeDepthMapFillHoles()</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;{</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    buildRegIntegralBuffer();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa41869769a3d82877c0bdf425af1a384">num_reg_created</a>=0;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    memcpy(otherDepthMap,currentDepthMap,width*height*<span class="keyword">sizeof</span>(DepthMapPixelHypothesis));</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a83e8ffca4304e073cb421de05007f15d">threadReducer</a>.<a class="code" href="../../de/d11/classlsd__slam_1_1IndexThreadReduce.html#ab2476f8c783eed60926b7e161cf2e0fb">reduce</a>(boost::bind(&amp;DepthMap::regularizeDepthMapFillHolesRow, <span class="keyword">this</span>, _1, _2, _3), 3, height-2, 10);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#a3034e34781a1b051050a29303942c1f1">printFillHolesStatistics</a>)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        printf(<span class="stringliteral">&quot;FillHoles (discreteDepth): %d created\n&quot;</span>,</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa41869769a3d82877c0bdf425af1a384">num_reg_created</a>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="keywordtype">void</span> DepthMap::buildRegIntegralBufferRow1(<span class="keywordtype">int</span> yMin, <span class="keywordtype">int</span> yMax, RunningStats* stats)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// ============ build inegral buffers</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordtype">int</span>* validityIntegralBufferPT = validityIntegralBuffer+yMin*width;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    DepthMapPixelHypothesis* ptSrc = currentDepthMap+yMin*width;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=yMin;y&lt;yMax;y++)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordtype">int</span> validityIntegralBufferSUM = 0;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=0;x&lt;width;x++)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="keywordflow">if</span>(ptSrc-&gt;isValid)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                validityIntegralBufferSUM += ptSrc-&gt;<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a56802b2f4413dd295383d142a3499808">validity_counter</a>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            *(validityIntegralBufferPT++) = validityIntegralBufferSUM;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            ptSrc++;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="keywordtype">void</span> DepthMap::buildRegIntegralBuffer()</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a83e8ffca4304e073cb421de05007f15d">threadReducer</a>.<a class="code" href="../../de/d11/classlsd__slam_1_1IndexThreadReduce.html#ab2476f8c783eed60926b7e161cf2e0fb">reduce</a>(boost::bind(&amp;DepthMap::buildRegIntegralBufferRow1, <span class="keyword">this</span>, _1, _2,_3), 0, height);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">int</span>* validityIntegralBufferPT = validityIntegralBuffer;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordtype">int</span>* validityIntegralBufferPT_T = validityIntegralBuffer+width;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordtype">int</span> wh = height*width;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> idx=width;idx&lt;wh;idx++)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        *(validityIntegralBufferPT_T++) += *(validityIntegralBufferPT++);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="keyword">template</span>&lt;<span class="keywordtype">bool</span> removeOcclusions&gt; <span class="keywordtype">void</span> DepthMap::regularizeDepthMapRow(<span class="keywordtype">int</span> validityTH, <span class="keywordtype">int</span> yMin, <span class="keywordtype">int</span> yMax, RunningStats* stats)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;{</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> regularize_radius = 2;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> regDistVar = <a class="code" href="../../de/d60/settings_8h.html#a11bed9afda04dc002b58e2dc27ec64fe">REG_DIST_VAR</a>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=yMin;y&lt;yMax;y++)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=regularize_radius;x&lt;width-regularize_radius;x++)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            DepthMapPixelHypothesis* dest = currentDepthMap + x + y*width;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            DepthMapPixelHypothesis* destRead = otherDepthMap + x + y*width;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="comment">// if isValid need to do better examination and then update.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; destRead-&gt;blacklisted &lt; <a class="code" href="../../de/d60/settings_8h.html#a6218447cb39a36244ad870b53ceaafd0">MIN_BLACKLIST</a>)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                stats-&gt;num_reg_blacklisted++;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">if</span>(!destRead-&gt;isValid)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="keywordtype">float</span> sum=0, val_sum=0, sumIvar=0;<span class="comment">//, min_varObs = 1e20;</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="keywordtype">int</span> numOccluding = 0, numNotOccluding = 0;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> dx=-regularize_radius; dx&lt;=regularize_radius;dx++)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> dy=-regularize_radius; dy&lt;=regularize_radius;dy++)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                    DepthMapPixelHypothesis* source = destRead + dx + dy*width;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                    <span class="keywordflow">if</span>(!source-&gt;isValid) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">//                  stats-&gt;num_reg_total++;</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                    <span class="keywordtype">float</span> diff =source-&gt;<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#abfc19276c22e1c4fae82f61054a4579f">idepth</a> - destRead-&gt;idepth;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#a5697355de97253131b1423a04bb10c58">DIFF_FAC_SMOOTHING</a>*diff*diff &gt; source-&gt;idepth_var + destRead-&gt;idepth_var)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                    {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                        <span class="keywordflow">if</span>(removeOcclusions)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                        {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                            <span class="keywordflow">if</span>(source-&gt;idepth &gt; destRead-&gt;idepth)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                                numOccluding++;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                    val_sum += source-&gt;validity_counter;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                    <span class="keywordflow">if</span>(removeOcclusions)</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                        numNotOccluding++;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                    <span class="keywordtype">float</span> distFac = (float)(dx*dx+dy*dy)*regDistVar;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                    <span class="keywordtype">float</span> ivar = 1.0f/(source-&gt;idepth_var + distFac);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                    sum += source-&gt;idepth * ivar;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                    sumIvar += ivar;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            <span class="keywordflow">if</span>(val_sum &lt; validityTH)</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                dest-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_reg_deleted_secondary++;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                dest-&gt;blacklisted--;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_reg_setBlacklisted++;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="keywordflow">if</span>(removeOcclusions)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                <span class="keywordflow">if</span>(numOccluding &gt; numNotOccluding)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                    dest-&gt;isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_reg_deleted_occluded++;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            sum = sum / sumIvar;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            sum = <a class="code" href="../../de/d60/settings_8h.html#a1e9db080b35f8245282a5531065d5635">UNZERO</a>(sum);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="comment">// update!</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            dest-&gt;idepth_smoothed = sum;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            dest-&gt;idepth_var_smoothed = 1.0f/sumIvar;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;num_reg_smeared++;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="keyword">template</span> <span class="keywordtype">void</span> DepthMap::regularizeDepthMapRow&lt;true&gt;(<span class="keywordtype">int</span> validityTH, <span class="keywordtype">int</span> yMin, <span class="keywordtype">int</span> yMax, RunningStats* stats);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="keyword">template</span> <span class="keywordtype">void</span> DepthMap::regularizeDepthMapRow&lt;false&gt;(<span class="keywordtype">int</span> validityTH, <span class="keywordtype">int</span> yMin, <span class="keywordtype">int</span> yMax, RunningStats* stats);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="keywordtype">void</span> DepthMap::regularizeDepthMap(<span class="keywordtype">bool</span> removeOcclusions, <span class="keywordtype">int</span> validityTH)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;{</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a132a07db925c925c01464fc175027255">num_reg_smeared</a>=0;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae6f37135e51264476d82c5616b1339d4">num_reg_total</a>=0;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa5ec07e003468dcf5b9baaa00976e5b8">num_reg_deleted_secondary</a>=0;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a6a7921e214fe4b46d7252444c9f66f6b">num_reg_deleted_occluded</a>=0;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad8daea4f289e4929b82d4f6fb1632c04">num_reg_blacklisted</a>=0;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac3f1446413cb96241a1621ccd935306b">num_reg_setBlacklisted</a>=0;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    memcpy(otherDepthMap,currentDepthMap,width*height*<span class="keyword">sizeof</span>(DepthMapPixelHypothesis));</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">if</span>(removeOcclusions)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a83e8ffca4304e073cb421de05007f15d">threadReducer</a>.<a class="code" href="../../de/d11/classlsd__slam_1_1IndexThreadReduce.html#ab2476f8c783eed60926b7e161cf2e0fb">reduce</a>(boost::bind(&amp;DepthMap::regularizeDepthMapRow&lt;true&gt;, <span class="keyword">this</span>, validityTH, _1, _2, _3), 2, height-2, 10);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a83e8ffca4304e073cb421de05007f15d">threadReducer</a>.<a class="code" href="../../de/d11/classlsd__slam_1_1IndexThreadReduce.html#ab2476f8c783eed60926b7e161cf2e0fb">reduce</a>(boost::bind(&amp;DepthMap::regularizeDepthMapRow&lt;false&gt;, <span class="keyword">this</span>, validityTH, _1, _2, _3), 2, height-2, 10);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#a14c9231bf2538778995c010e72a8b0f9">printRegularizeStatistics</a>)</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        printf(<span class="stringliteral">&quot;REGULARIZE (%d): %d smeared; %d blacklisted /%d new); %d deleted; %d occluded; %d filled\n&quot;</span>,</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(),</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a132a07db925c925c01464fc175027255">num_reg_smeared</a>,</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad8daea4f289e4929b82d4f6fb1632c04">num_reg_blacklisted</a>,</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac3f1446413cb96241a1621ccd935306b">num_reg_setBlacklisted</a>,</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa5ec07e003468dcf5b9baaa00976e5b8">num_reg_deleted_secondary</a>,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a6a7921e214fe4b46d7252444c9f66f6b">num_reg_deleted_occluded</a>,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa41869769a3d82877c0bdf425af1a384">num_reg_created</a>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad43f276ef4edee8420460b452929aad4">  883</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad43f276ef4edee8420460b452929aad4">DepthMap::initializeRandomly</a>(<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* new_frame)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;{</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    activeKeyFramelock = new_frame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#af73ccb75e1e449d9a8f2044246ee3530">getActiveLock</a>();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    activeKeyFrame = new_frame;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    activeKeyFrameImageData = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    activeKeyFrameIsReactivated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* maxGradients = new_frame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0b26845d846249e909e6ab0adc022ebf">maxGradients</a>();</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=1;y&lt;height-1;y++)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=1;x&lt;width-1;x++)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">if</span>(maxGradients[x+y*width] &gt; <a class="code" href="../../de/d60/settings_8h.html#a9706e982f42399b3f4abedbf4cf9aaa1">MIN_ABS_GRAD_CREATE</a>)</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                <span class="keywordtype">float</span> idepth = 0.5f + 1.0f * ((rand() % 100001) / 100000.0f);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                currentDepthMap[x+y*width] = <a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>(</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                        idepth,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        idepth,</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                        <a class="code" href="../../de/d60/settings_8h.html#a785860383d41a576bfae9bb54354b84e">VAR_RANDOM_INIT_INITIAL</a>,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                        <a class="code" href="../../de/d60/settings_8h.html#a785860383d41a576bfae9bb54354b84e">VAR_RANDOM_INIT_INITIAL</a>,</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                        20);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                currentDepthMap[x+y*width].<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#aba28a1bf8203d9e0e323b9015d4ac425">isValid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                currentDepthMap[x+y*width].<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a27273a9266af3c4fb91147febeae020a">blacklisted</a> = 0;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa869fc645781090678dc61399ef26f73">setDepth</a>(currentDepthMap);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;}</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a79d83f1d1911274ab55d95ebf5e3dab5">  920</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a79d83f1d1911274ab55d95ebf5e3dab5">DepthMap::setFromExistingKF</a>(<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* kf)</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;{</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    assert(kf-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#abe0ec6e93823ae0a31e73100a8b73940">hasIDepthBeenSet</a>());</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    activeKeyFramelock = kf-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#af73ccb75e1e449d9a8f2044246ee3530">getActiveLock</a>();</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    activeKeyFrame = kf;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* idepth = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#adac400f4b48f3d5ea20ee4ac8ea5ad8e">idepth_reAct</a>();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* idepthVar = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a8e128c8fdc004bd808c365c1ea38c9bd">idepthVar_reAct</a>();</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* validity = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a51cfb8cc35140eee3283021d97496db6">validity_reAct</a>();</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>* pt = currentDepthMap;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a722bd8b07e962b6de142519f38405628">numMappedOnThis</a> = 0;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0e33cc989142a9266f582df4931fbd52">numFramesTrackedOnThis</a> = 0;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    activeKeyFrameImageData = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    activeKeyFrameIsReactivated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;height;y++)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=0;x&lt;width;x++)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">if</span>(*idepthVar &gt; 0)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                *pt = <a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>(</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                        *idepth,</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                        *idepthVar,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                        *validity);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                currentDepthMap[x+y*width].<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#aba28a1bf8203d9e0e323b9015d4ac425">isValid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                currentDepthMap[x+y*width].<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a27273a9266af3c4fb91147febeae020a">blacklisted</a> = (*idepthVar == -2) ? <a class="code" href="../../de/d60/settings_8h.html#a6218447cb39a36244ad870b53ceaafd0">MIN_BLACKLIST</a>-1 : 0;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            idepth++;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            idepthVar++;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            validity++;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            pt++;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    regularizeDepthMap(<span class="keyword">false</span>, <a class="code" href="../../de/d60/settings_8h.html#a3d69334efe3a6398245cf4f995e87262">VAL_SUM_MIN_FOR_KEEP</a>);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;}</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aef0161396bb13077d05198f0f5514e4c">  965</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aef0161396bb13077d05198f0f5514e4c">DepthMap::initializeFromGTDepth</a>(<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* new_frame)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    assert(new_frame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#abe0ec6e93823ae0a31e73100a8b73940">hasIDepthBeenSet</a>());</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    activeKeyFramelock = new_frame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#af73ccb75e1e449d9a8f2044246ee3530">getActiveLock</a>();</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    activeKeyFrame = new_frame;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    activeKeyFrameImageData = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    activeKeyFrameIsReactivated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* idepth = new_frame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ad78d873de1adfd4ab3268c50b1d462c7">idepth</a>();</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordtype">float</span> averageGTIDepthSum = 0;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordtype">int</span> averageGTIDepthNum = 0;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;height;y++)</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=0;x&lt;width;x++)</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <span class="keywordtype">float</span> idepthValue = idepth[x+y*width];</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <span class="keywordflow">if</span>(!isnanf(idepthValue) &amp;&amp; idepthValue &gt; 0)</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                averageGTIDepthSum += idepthValue;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                averageGTIDepthNum ++;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;height;y++)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=0;x&lt;width;x++)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="keywordtype">float</span> idepthValue = idepth[x+y*width];</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <span class="keywordflow">if</span>(!isnanf(idepthValue) &amp;&amp; idepthValue &gt; 0)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                currentDepthMap[x+y*width] = <a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>(</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                        idepthValue,</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                        idepthValue,</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                        <a class="code" href="../../de/d60/settings_8h.html#ac5d5eafc489f08a0ab86da387447db93">VAR_GT_INIT_INITIAL</a>,</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                        <a class="code" href="../../de/d60/settings_8h.html#ac5d5eafc489f08a0ab86da387447db93">VAR_GT_INIT_INITIAL</a>,</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                        20);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                currentDepthMap[x+y*width].<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#aba28a1bf8203d9e0e323b9015d4ac425">isValid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                currentDepthMap[x+y*width].<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a27273a9266af3c4fb91147febeae020a">blacklisted</a> = 0;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa869fc645781090678dc61399ef26f73">setDepth</a>(currentDepthMap);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="keywordtype">void</span> DepthMap::resetCounters()</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;{</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a3ffa3606131f0e84d1baa57b0b14e736">num_stereo_comparisons</a>=0;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a21bd82ff3888237a8fa5cfb8612adc2f">num_pixelInterpolations</a>=0;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a14bb7c06477c1b139c3b26074290b887">num_stereo_calls</a> = 0;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a00d8e52e0b0be0017b69986cea2330d7">num_stereo_rescale_oob</a> = 0;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a9834e14ca0d8a852fde16a5acd4302a0">num_stereo_inf_oob</a> = 0;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a639551f140700da5c64c8ea845ccb55a">num_stereo_near_oob</a> = 0;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a17c81987dad49a1a791d3ce8619a3bea">num_stereo_invalid_unclear_winner</a> = 0;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa702bd7825604257e1fcfa3b8961eef1">num_stereo_invalid_atEnd</a> = 0;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a29a637bd4733ae6998e0e62a5ffcbeaf">num_stereo_invalid_inexistantCrossing</a> = 0;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aedf9a1f1a22813d2fde22132039a6600">num_stereo_invalid_twoCrossing</a> = 0;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad030f2d1aec3b1782e3c25c2ed92de2d">num_stereo_invalid_noCrossing</a> = 0;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0d7c8c678e78374aa67778e5eacce1da">num_stereo_invalid_bigErr</a> = 0;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac5fe9c500f2621c4545d21d009766278">num_stereo_interpPre</a> = 0;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad4dd2b50e966ab0ec29d5d49a016deb3">num_stereo_interpPost</a> = 0;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a461560cbd64d526a1248d78c1def44f2">num_stereo_interpNone</a> = 0;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aebcdfe759c972a610f79f3a568b602a1">num_stereo_negative</a> = 0;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae97a90b0e98f973df41d1c91880dfb2e">num_stereo_successfull</a> = 0;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad667a1e778a9814d465947e40851da1f">num_observe_created</a>=0;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa7268f6ac7e48aa2f95ed259b475fad4">num_observe_create_attempted</a>=0;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#af69ecb1d5574427ce9ad6c8f6d1541fa">num_observe_updated</a>=0;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ab448a7720cc9f5eac710b4885fe76ab5">num_observe_update_attempted</a>=0;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a568f496710f976510fcd8d547f3bfc9d">num_observe_skipped_small_epl</a>=0;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a13ddf75d2d4e77268131edce09f9579a">num_observe_skipped_small_epl_grad</a>=0;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae1869fd3a2b8145cb8e3cded8546b06c">num_observe_skipped_small_epl_angle</a>=0;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a19d8063bd003c9e70e2ef925992a9046">num_observe_transit_finalizing</a>=0;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aecd39056f5799f1252295775f35ddf19">num_observe_transit_idle_oob</a>=0;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#afcfeb429836396cc14f8aa84507d0569">num_observe_transit_idle_scale_angle</a>=0;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad81a61b46dc1905ef6a2be032d158b82">num_observe_trans_idle_exhausted</a>=0;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a31cf48ff8a69f642783d39fc5b3cdda8">num_observe_inconsistent_finalizing</a>=0;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a010d3b33ee98a7e0351849b51b44f2a9">num_observe_inconsistent</a>=0;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a49deac8de9b3dedea20265d949303db8">num_observe_notfound_finalizing2</a>=0;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0e09455f3a738f3ec4bee9245920aa93">num_observe_notfound_finalizing</a>=0;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a7d9ef4d92788bb6dd693d21d05bd98ed">num_observe_notfound</a>=0;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a28d3143c38eb4d6e35bee6c8270faa2c">num_observe_skip_fail</a>=0;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a5c4e688e7513e34dd120114104335205">num_observe_skip_oob</a>=0;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a4406c1e00b408b0276d50dcb2176cc74">num_observe_good</a>=0;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#adb090708a6d800ab4755397c210583b1">num_observe_good_finalizing</a>=0;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#abce0e214e1c57815a67dd4b904801243">num_observe_state_finalizing</a>=0;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa99ef28d1e686d2eb1a3cc9378957361">num_observe_state_initializing</a>=0;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0dcc58a8dc867b4d2996e373323951c2">num_observe_skip_alreadyGood</a>=0;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a85ceddca691c6b669c84d3d0d274fc1f">num_observe_addSkip</a>=0;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa5edbc8eae06bb767a57b1be4278189b">num_observe_blacklisted</a>=0;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;}</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div>
<div class="line"><a name="l01072"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a80d89c896825d97dd61021ea8dc904eb"> 1072</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a80d89c896825d97dd61021ea8dc904eb">DepthMap::updateKeyframe</a>(std::deque&lt; std::shared_ptr&lt;Frame&gt; &gt; referenceFrames)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;{</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    assert(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a77ffa8175ac0ff7e3d9a6bbe72d7fe93">isValid</a>());</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keyword">struct </span>timeval tv_start_all, tv_end_all;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    gettimeofday(&amp;tv_start_all, NULL);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    oldest_referenceFrame = referenceFrames.front().get();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    newest_referenceFrame = referenceFrames.back().get();</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    referenceFrameByID.clear();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    referenceFrameByID_offset = oldest_referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>();</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">for</span>(std::shared_ptr&lt;Frame&gt; frame : referenceFrames)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        assert(frame-&gt;hasTrackingParent());</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">if</span>(frame-&gt;getTrackingParent() != activeKeyFrame)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            printf(<span class="stringliteral">&quot;WARNING: updating frame %d with %d, which was tracked on a different frame (%d).\nWhile this should work, it is not recommended.&quot;</span>,</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(), frame-&gt;id(),</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    frame-&gt;getTrackingParent()-&gt;id());</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <a class="code" href="../../de/d0b/classSophus_1_1Sim3Group.html">Sim3</a> refToKf;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">if</span>(frame-&gt;pose-&gt;trackingParent-&gt;frameID == activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>())</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            refToKf = frame-&gt;pose-&gt;thisToParent_raw;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            refToKf = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0f4a92d51569c280e4b37acbf562ea47">getScaledCamToWorld</a>().<a class="code" href="../../d6/db5/classSophus_1_1Sim3GroupBase.html#a21debb906ffbeda23394fbddea8f3acd">inverse</a>() *  frame-&gt;getScaledCamToWorld();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        frame-&gt;prepareForStereoWith(activeKeyFrame, refToKf, K, 0);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">while</span>((<span class="keywordtype">int</span>)referenceFrameByID.size() + referenceFrameByID_offset &lt;= frame-&gt;id())</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            referenceFrameByID.push_back(frame.get());</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    resetCounters();</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        cv::Mat keyFrameImage(activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a014d19bf6ffba0f0c0b8b684f9afb0b0">height</a>(), activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a3f14a1c43b6cb21d31274f880b0bf36b">width</a>(), CV_32F, <span class="keyword">const_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(activeKeyFrameImageData));</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        keyFrameImage.convertTo(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>, CV_8UC1);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        cv::cvtColor(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>, CV_GRAY2RGB);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        cv::Mat oldest_refImage(oldest_referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a014d19bf6ffba0f0c0b8b684f9afb0b0">height</a>(), oldest_referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a3f14a1c43b6cb21d31274f880b0bf36b">width</a>(), CV_32F, <span class="keyword">const_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(oldest_referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0)));</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        cv::Mat newest_refImage(newest_referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a014d19bf6ffba0f0c0b8b684f9afb0b0">height</a>(), newest_referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a3f14a1c43b6cb21d31274f880b0bf36b">width</a>(), CV_32F, <span class="keyword">const_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(newest_referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0)));</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        cv::Mat rfimg = 0.5f*oldest_refImage + 0.5f*newest_refImage;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        rfimg.convertTo(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">debugImageStereoLines</a>, CV_8UC1);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        cv::cvtColor(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">debugImageStereoLines</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">debugImageStereoLines</a>, CV_GRAY2RGB);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keyword">struct </span>timeval tv_start, tv_end;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    observeDepth();</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8078cd87bf8b167bd24216291bc0b340">msObserve</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8078cd87bf8b167bd24216291bc0b340">msObserve</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a86997fec300a6e9f1646eb1f073d91a4">nObserve</a>++;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="comment">//if(rand()%10==0)</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        regularizeDepthMapFillHoles();</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad296834582dab62c4621eac896c30bee">nFillHoles</a>++;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    regularizeDepthMap(<span class="keyword">false</span>, <a class="code" href="../../de/d60/settings_8h.html#a3d69334efe3a6398245cf4f995e87262">VAL_SUM_MIN_FOR_KEEP</a>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">nRegularize</a>++;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="comment">// Update depth in keyframe</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">if</span>(!activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a2447e3447316b2803b20542e70e10785">depthHasBeenUpdatedFlag</a>)</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa869fc645781090678dc61399ef26f73">setDepth</a>(currentDepthMap);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a06395761fbe5b73f2e2cd43095cdbde1">nSetDepth</a>++;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    gettimeofday(&amp;tv_end_all, NULL);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a0293920188f70a06ec1e53f6f127ff12">msUpdate</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a0293920188f70a06ec1e53f6f127ff12">msUpdate</a> + 0.1*((tv_end_all.tv_sec-tv_start_all.tv_sec)*1000.0f + (tv_end_all.tv_usec-tv_start_all.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3328c02e1478f7959c5517d98408e9c8">nUpdate</a>++;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a722bd8b07e962b6de142519f38405628">numMappedOnThis</a>++;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a18830417f9d1cdd547145fdd3d8de297">numMappedOnThisTotal</a>++;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <a class="code" href="../../d8/da0/namespacelsd__slam_1_1Util.html#a0aefaadcc7a2728f8248cacce2cc352a">Util::displayImage</a>( <span class="stringliteral">&quot;Stereo Key Frame&quot;</span>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">debugImageHypothesisHandling</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <a class="code" href="../../d8/da0/namespacelsd__slam_1_1Util.html#a0aefaadcc7a2728f8248cacce2cc352a">Util::displayImage</a>( <span class="stringliteral">&quot;Stereo Reference Frame&quot;</span>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">debugImageStereoLines</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#af32d1f6c7d1ce616de6514bcaace4be3">printLineStereoStatistics</a>)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        printf(<span class="stringliteral">&quot;ST: calls %6d, comp %6d, int %7d; good %6d (%.0f%%), neg %6d (%.0f%%); interp %6d / %6d / %6d\n&quot;</span>,</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a14bb7c06477c1b139c3b26074290b887">num_stereo_calls</a>,</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a3ffa3606131f0e84d1baa57b0b14e736">num_stereo_comparisons</a>,</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a21bd82ff3888237a8fa5cfb8612adc2f">num_pixelInterpolations</a>,</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae97a90b0e98f973df41d1c91880dfb2e">num_stereo_successfull</a>,</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                100*<a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae97a90b0e98f973df41d1c91880dfb2e">num_stereo_successfull</a> / (<span class="keywordtype">float</span>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a14bb7c06477c1b139c3b26074290b887">num_stereo_calls</a>,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aebcdfe759c972a610f79f3a568b602a1">num_stereo_negative</a>,</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                100*<a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aebcdfe759c972a610f79f3a568b602a1">num_stereo_negative</a> / (<span class="keywordtype">float</span>) <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae97a90b0e98f973df41d1c91880dfb2e">num_stereo_successfull</a>,</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac5fe9c500f2621c4545d21d009766278">num_stereo_interpPre</a>,</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a461560cbd64d526a1248d78c1def44f2">num_stereo_interpNone</a>,</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad4dd2b50e966ab0ec29d5d49a016deb3">num_stereo_interpPost</a>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#a18af125438f137d8990887fa5b364424">printLineStereoFails</a>)</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        printf(<span class="stringliteral">&quot;ST-ERR: oob %d (scale %d, inf %d, near %d); err %d (%d uncl; %d end; zro: %d btw, %d no, %d two; %d big)\n&quot;</span>,</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a00d8e52e0b0be0017b69986cea2330d7">num_stereo_rescale_oob</a>+</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a9834e14ca0d8a852fde16a5acd4302a0">num_stereo_inf_oob</a>+</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a639551f140700da5c64c8ea845ccb55a">num_stereo_near_oob</a>,</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a00d8e52e0b0be0017b69986cea2330d7">num_stereo_rescale_oob</a>,</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a9834e14ca0d8a852fde16a5acd4302a0">num_stereo_inf_oob</a>,</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a639551f140700da5c64c8ea845ccb55a">num_stereo_near_oob</a>,</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a17c81987dad49a1a791d3ce8619a3bea">num_stereo_invalid_unclear_winner</a>+</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa702bd7825604257e1fcfa3b8961eef1">num_stereo_invalid_atEnd</a>+</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a29a637bd4733ae6998e0e62a5ffcbeaf">num_stereo_invalid_inexistantCrossing</a>+</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad030f2d1aec3b1782e3c25c2ed92de2d">num_stereo_invalid_noCrossing</a>+</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aedf9a1f1a22813d2fde22132039a6600">num_stereo_invalid_twoCrossing</a>+</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                    <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0d7c8c678e78374aa67778e5eacce1da">num_stereo_invalid_bigErr</a>,</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a17c81987dad49a1a791d3ce8619a3bea">num_stereo_invalid_unclear_winner</a>,</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa702bd7825604257e1fcfa3b8961eef1">num_stereo_invalid_atEnd</a>,</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a29a637bd4733ae6998e0e62a5ffcbeaf">num_stereo_invalid_inexistantCrossing</a>,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad030f2d1aec3b1782e3c25c2ed92de2d">num_stereo_invalid_noCrossing</a>,</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aedf9a1f1a22813d2fde22132039a6600">num_stereo_invalid_twoCrossing</a>,</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                <a class="code" href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">runningStats</a>.<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0d7c8c678e78374aa67778e5eacce1da">num_stereo_invalid_bigErr</a>);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div>
<div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ac4fa06d232e9964882dd19cc44a31c3e"> 1215</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ac4fa06d232e9964882dd19cc44a31c3e">DepthMap::invalidate</a>()</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span>(activeKeyFrame==0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    activeKeyFrame=0;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    activeKeyFramelock.unlock();</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;}</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div>
<div class="line"><a name="l01222"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#add52a76d9e4ebdb9f14408bf3e996d8c"> 1222</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#add52a76d9e4ebdb9f14408bf3e996d8c">DepthMap::createKeyFrame</a>(<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* new_keyframe)</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;{</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    assert(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a77ffa8175ac0ff7e3d9a6bbe72d7fe93">isValid</a>());</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    assert(new_keyframe != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    assert(new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a013921be6869702deac98090a8c9033c">hasTrackingParent</a>());</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">//boost::shared_lock&lt;boost::shared_mutex&gt; lock = activeKeyFrame-&gt;getActiveLock();</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    boost::shared_lock&lt;boost::shared_mutex&gt; lock2 = new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#af73ccb75e1e449d9a8f2044246ee3530">getActiveLock</a>();</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keyword">struct </span>timeval tv_start_all, tv_end_all;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    gettimeofday(&amp;tv_start_all, NULL);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    resetCounters();</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        cv::Mat keyFrameImage(new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a014d19bf6ffba0f0c0b8b684f9afb0b0">height</a>(), new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a3f14a1c43b6cb21d31274f880b0bf36b">width</a>(), CV_32F, <span class="keyword">const_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0)));</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        keyFrameImage.convertTo(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af4b1dbbafb28400c67581b32f39e3c65">debugImageHypothesisPropagation</a>, CV_8UC1);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        cv::cvtColor(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af4b1dbbafb28400c67581b32f39e3c65">debugImageHypothesisPropagation</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#af4b1dbbafb28400c67581b32f39e3c65">debugImageHypothesisPropagation</a>, CV_GRAY2RGB);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html">SE3</a> oldToNew_SE3 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#a6ab8d718a8bf6c1c85541b8948bd5248">se3FromSim3</a>(new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9e446e7abf6fc1e988594935dad9072b">pose</a>-&gt;<a class="code" href="../../d9/d9e/classlsd__slam_1_1FramePoseStruct.html#acf840ddb08df60aa537c52b305430a2a">thisToParent_raw</a>).<a class="code" href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">inverse</a>();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keyword">struct </span>timeval tv_start, tv_end;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    propagateDepth(new_keyframe);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8e425cd5c9a68bbb156cb5d7e67c6d4d">msPropagate</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8e425cd5c9a68bbb156cb5d7e67c6d4d">msPropagate</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a7477c29680584827e22336df0604ba9d">nPropagate</a>++;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    activeKeyFrame = new_keyframe;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    activeKeyFramelock = activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#af73ccb75e1e449d9a8f2044246ee3530">getActiveLock</a>();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    activeKeyFrameImageData = new_keyframe-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">image</a>(0);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    activeKeyFrameIsReactivated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    regularizeDepthMap(<span class="keyword">true</span>, <a class="code" href="../../de/d60/settings_8h.html#a3d69334efe3a6398245cf4f995e87262">VAL_SUM_MIN_FOR_KEEP</a>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">nRegularize</a>++;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    regularizeDepthMapFillHoles();</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad296834582dab62c4621eac896c30bee">nFillHoles</a>++;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    regularizeDepthMap(<span class="keyword">false</span>, <a class="code" href="../../de/d60/settings_8h.html#a3d69334efe3a6398245cf4f995e87262">VAL_SUM_MIN_FOR_KEEP</a>);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">nRegularize</a>++;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// make mean inverse depth be one.</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordtype">float</span> sumIdepth=0, numIdepth=0;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>* source = currentDepthMap; source &lt; currentDepthMap+width*height; source++)</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">if</span>(!source-&gt;isValid)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        sumIdepth += source-&gt;idepth_smoothed;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        numIdepth++;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordtype">float</span> rescaleFactor = numIdepth / sumIdepth;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordtype">float</span> rescaleFactor2 = rescaleFactor*rescaleFactor;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">DepthMapPixelHypothesis</a>* source = currentDepthMap; source &lt; currentDepthMap+width*height; source++)</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">if</span>(!source-&gt;isValid)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        source-&gt;idepth *= rescaleFactor;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        source-&gt;idepth_smoothed *= rescaleFactor;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        source-&gt;idepth_var *= rescaleFactor2;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        source-&gt;idepth_var_smoothed *= rescaleFactor2;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9e446e7abf6fc1e988594935dad9072b">pose</a>-&gt;<a class="code" href="../../d9/d9e/classlsd__slam_1_1FramePoseStruct.html#acf840ddb08df60aa537c52b305430a2a">thisToParent_raw</a> = <a class="code" href="../../dc/dca/namespacelsd__slam.html#a65aac68c7cecdc9c125ec8926b27e867">sim3FromSE3</a>(oldToNew_SE3.<a class="code" href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">inverse</a>(), rescaleFactor);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9e446e7abf6fc1e988594935dad9072b">pose</a>-&gt;<a class="code" href="../../d9/d9e/classlsd__slam_1_1FramePoseStruct.html#ab9486b6fbedeb81e5e7d29f02f92c008">invalidateCache</a>();</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">// Update depth in keyframe</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa869fc645781090678dc61399ef26f73">setDepth</a>(currentDepthMap);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a06395761fbe5b73f2e2cd43095cdbde1">nSetDepth</a>++;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    gettimeofday(&amp;tv_end_all, NULL);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad639f2fda59ef3ceeb6604853968efd3">msCreate</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad639f2fda59ef3ceeb6604853968efd3">msCreate</a> + 0.1*((tv_end_all.tv_sec-tv_start_all.tv_sec)*1000.0f + (tv_end_all.tv_usec-tv_start_all.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a65b604326ce1a5e9472715dbe2c8ed6f">nCreate</a>++;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="comment">//Util::displayImage( &quot;KeyFramePropagation&quot;, debugImageHypothesisPropagation );</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;}</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div>
<div class="line"><a name="l01329"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aaad7df1f66aea8294bfddd8bc929bc00"> 1329</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aaad7df1f66aea8294bfddd8bc929bc00">DepthMap::addTimingSample</a>()</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;{</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keyword">struct </span>timeval now;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    gettimeofday(&amp;now, NULL);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordtype">float</span> sPassed = ((now.tv_sec-<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a23c23f50eb70b90fd4ec83a7cc056cd9">lastHzUpdate</a>.tv_sec) + (now.tv_usec-<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a23c23f50eb70b90fd4ec83a7cc056cd9">lastHzUpdate</a>.tv_usec)/1000000.0f);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">if</span>(sPassed &gt; 1.0f)</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a131839c5289fea45b006d9177bab12aa">nAvgUpdate</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a131839c5289fea45b006d9177bab12aa">nAvgUpdate</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3328c02e1478f7959c5517d98408e9c8">nUpdate</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3328c02e1478f7959c5517d98408e9c8">nUpdate</a> = 0;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aed7adc9d8d2112785b63eef9899cb1cd">nAvgCreate</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aed7adc9d8d2112785b63eef9899cb1cd">nAvgCreate</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a65b604326ce1a5e9472715dbe2c8ed6f">nCreate</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a65b604326ce1a5e9472715dbe2c8ed6f">nCreate</a> = 0;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab39ca230ecaf2395bcf801868a67da3f">nAvgFinalize</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab39ca230ecaf2395bcf801868a67da3f">nAvgFinalize</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#acb27b62a7248eb9a108adcef78541aff">nFinalize</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#acb27b62a7248eb9a108adcef78541aff">nFinalize</a> = 0;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a60e43a7f852d4c2d2d32eb47c44168e1">nAvgObserve</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a60e43a7f852d4c2d2d32eb47c44168e1">nAvgObserve</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a86997fec300a6e9f1646eb1f073d91a4">nObserve</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a86997fec300a6e9f1646eb1f073d91a4">nObserve</a> = 0;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3ec6d916f8712382ba9052c00db98148">nAvgRegularize</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3ec6d916f8712382ba9052c00db98148">nAvgRegularize</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">nRegularize</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">nRegularize</a> = 0;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a75f06d356632124077ea0559f44185d9">nAvgPropagate</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a75f06d356632124077ea0559f44185d9">nAvgPropagate</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a7477c29680584827e22336df0604ba9d">nPropagate</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a7477c29680584827e22336df0604ba9d">nPropagate</a> = 0;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a66431a18987966493cb7796d55c0162b">nAvgFillHoles</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a66431a18987966493cb7796d55c0162b">nAvgFillHoles</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad296834582dab62c4621eac896c30bee">nFillHoles</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad296834582dab62c4621eac896c30bee">nFillHoles</a> = 0;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a01b2c6e4c011b44a98b50bfbf8d91ddb">nAvgSetDepth</a> = 0.8*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a01b2c6e4c011b44a98b50bfbf8d91ddb">nAvgSetDepth</a> + 0.2*(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a06395761fbe5b73f2e2cd43095cdbde1">nSetDepth</a> / sPassed); <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a06395761fbe5b73f2e2cd43095cdbde1">nSetDepth</a> = 0;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a23c23f50eb70b90fd4ec83a7cc056cd9">lastHzUpdate</a> = now;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#a0937f9a26f5d259ddef6865ee1f82994">printMappingTiming</a>)</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            printf(<span class="stringliteral">&quot;Upd %3.1fms (%.1fHz); Create %3.1fms (%.1fHz); Final %3.1fms (%.1fHz) // Obs %3.1fms (%.1fHz); Reg %3.1fms (%.1fHz); Prop %3.1fms (%.1fHz); Fill %3.1fms (%.1fHz); Set %3.1fms (%.1fHz)\n&quot;</span>,</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a0293920188f70a06ec1e53f6f127ff12">msUpdate</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a131839c5289fea45b006d9177bab12aa">nAvgUpdate</a>,</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad639f2fda59ef3ceeb6604853968efd3">msCreate</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#aed7adc9d8d2112785b63eef9899cb1cd">nAvgCreate</a>,</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab185dd9f3fc27093ecf093926c4a6a5e">msFinalize</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab39ca230ecaf2395bcf801868a67da3f">nAvgFinalize</a>,</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8078cd87bf8b167bd24216291bc0b340">msObserve</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a60e43a7f852d4c2d2d32eb47c44168e1">nAvgObserve</a>,</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3ec6d916f8712382ba9052c00db98148">nAvgRegularize</a>,</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8e425cd5c9a68bbb156cb5d7e67c6d4d">msPropagate</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a75f06d356632124077ea0559f44185d9">nAvgPropagate</a>,</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a66431a18987966493cb7796d55c0162b">nAvgFillHoles</a>,</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a01b2c6e4c011b44a98b50bfbf8d91ddb">nAvgSetDepth</a>);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;}</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div>
<div class="line"><a name="l01363"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a30d6435ab093553615696f68e3a157d8"> 1363</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a30d6435ab093553615696f68e3a157d8">DepthMap::finalizeKeyFrame</a>()</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;{</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    assert(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a77ffa8175ac0ff7e3d9a6bbe72d7fe93">isValid</a>());</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keyword">struct </span>timeval tv_start_all, tv_end_all;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    gettimeofday(&amp;tv_start_all, NULL);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keyword">struct </span>timeval tv_start, tv_end;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    regularizeDepthMapFillHoles();</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">msFillHoles</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad296834582dab62c4621eac896c30bee">nFillHoles</a>++;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    regularizeDepthMap(<span class="keyword">false</span>, <a class="code" href="../../de/d60/settings_8h.html#a3d69334efe3a6398245cf4f995e87262">VAL_SUM_MIN_FOR_KEEP</a>);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">msRegularize</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">nRegularize</a>++;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    gettimeofday(&amp;tv_start, NULL);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa869fc645781090678dc61399ef26f73">setDepth</a>(currentDepthMap);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a4ff87802d5bcafda551ffb2506f7192e">calculateMeanInformation</a>();</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aab79f2a5a9f59c2cf2b9714ad48c53ae">takeReActivationData</a>(currentDepthMap);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    gettimeofday(&amp;tv_end, NULL);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">msSetDepth</a> + 0.1*((tv_end.tv_sec-tv_start.tv_sec)*1000.0f + (tv_end.tv_usec-tv_start.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a06395761fbe5b73f2e2cd43095cdbde1">nSetDepth</a>++;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    gettimeofday(&amp;tv_end_all, NULL);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab185dd9f3fc27093ecf093926c4a6a5e">msFinalize</a> = 0.9*<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab185dd9f3fc27093ecf093926c4a6a5e">msFinalize</a> + 0.1*((tv_end_all.tv_sec-tv_start_all.tv_sec)*1000.0f + (tv_end_all.tv_usec-tv_start_all.tv_usec)/1000.0f);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#acb27b62a7248eb9a108adcef78541aff">nFinalize</a>++;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div>
<div class="line"><a name="l01400"></a><span class="lineno"><a class="line" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a30565f7b2f6fddff49694a05ddac983d"> 1400</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a30565f7b2f6fddff49694a05ddac983d">DepthMap::debugPlotDepthMap</a>()</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;{</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span>(activeKeyFrame == 0) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    cv::Mat keyFrameImage(activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a014d19bf6ffba0f0c0b8b684f9afb0b0">height</a>(), activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a3f14a1c43b6cb21d31274f880b0bf36b">width</a>(), CV_32F, <span class="keyword">const_cast&lt;</span><span class="keywordtype">float</span>*<span class="keyword">&gt;</span>(activeKeyFrameImageData));</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    keyFrameImage.convertTo(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">debugImageDepth</a>, CV_8UC1);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    cv::cvtColor(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">debugImageDepth</a>, <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">debugImageDepth</a>, CV_GRAY2RGB);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">// debug plot &amp; publish sparse version?</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordtype">int</span> refID = referenceFrameByID_offset;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;height;y++)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x=0;x&lt;width;x++)</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            <span class="keywordtype">int</span> idx = x + y*width;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            <span class="keywordflow">if</span>(currentDepthMap[idx].blacklisted &lt; <a class="code" href="../../de/d60/settings_8h.html#a6218447cb39a36244ad870b53ceaafd0">MIN_BLACKLIST</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#aec14e9e02389be3d29fb49a0897853ab">debugDisplay</a> == 2)</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">debugImageDepth</a>.at&lt;cv::Vec3b&gt;(y,x) = cv::Vec3b(0,0,255);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            <span class="keywordflow">if</span>(!currentDepthMap[idx].<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a77ffa8175ac0ff7e3d9a6bbe72d7fe93">isValid</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            cv::Vec3b color = currentDepthMap[idx].<a class="code" href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#ad59c8017a906e51e3ab3b104b68da64b">getVisualizationColor</a>(refID);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">debugImageDepth</a>.at&lt;cv::Vec3b&gt;(y,x) = color;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;}</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">// find pixel in image (do stereo along epipolar line).</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">// mat: NEW image</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">// KinvP: point in OLD image (Kinv * (u_old, v_old, 1)), projected</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">// trafo: x_old = trafo * x_new; (from new to old image)</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">// realVal: descriptor in OLD image.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">// returns: result_idepth : point depth in new camera&#39;s coordinate system</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">// returns: result_u/v : point&#39;s coordinates in new camera&#39;s coordinate system</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">// returns: idepth_var: (approximated) measurement variance of inverse depth of result_point_NEW</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">// returns error if sucessful; -1 if out of bounds, -2 if not found.</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">float</span> DepthMap::doLineStereo(</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> u, <span class="keyword">const</span> <span class="keywordtype">float</span> v, <span class="keyword">const</span> <span class="keywordtype">float</span> epxn, <span class="keyword">const</span> <span class="keywordtype">float</span> epyn,</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> min_idepth, <span class="keyword">const</span> <span class="keywordtype">float</span> prior_idepth, <span class="keywordtype">float</span> max_idepth,</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* <span class="keyword">const</span> referenceFrame, <span class="keyword">const</span> <span class="keywordtype">float</span>* referenceFrameImage,</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="keywordtype">float</span> &amp;result_idepth, <span class="keywordtype">float</span> &amp;result_var, <span class="keywordtype">float</span> &amp;result_eplLength,</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html">RunningStats</a>* stats)</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;{</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a14bb7c06477c1b139c3b26074290b887">num_stereo_calls</a>++;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">// calculate epipolar line start and end point in old image</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    Eigen::Vector3f KinvP = Eigen::Vector3f(fxi*u+cxi,fyi*v+cyi,1.0f);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    Eigen::Vector3f pInf = referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa5422a17806f94238eb4b0a997f84d3c">K_otherToThis_R</a> * KinvP;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    Eigen::Vector3f pReal = pInf / prior_idepth + referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a299bcddaca0539b927cc0e3a6ec5739b">K_otherToThis_t</a>;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordtype">float</span> rescaleFactor = pReal[2] * prior_idepth;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordtype">float</span> firstX = u - 2*epxn*rescaleFactor;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordtype">float</span> firstY = v - 2*epyn*rescaleFactor;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordtype">float</span> lastX = u + 2*epxn*rescaleFactor;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordtype">float</span> lastY = v + 2*epyn*rescaleFactor;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="comment">// width - 2 and height - 2 comes from the one-sided gradient calculation at the bottom</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (firstX &lt;= 0 || firstX &gt;= width - 2</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        || firstY &lt;= 0 || firstY &gt;= height - 2</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        || lastX &lt;= 0 || lastX &gt;= width - 2</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        || lastY &lt;= 0 || lastY &gt;= height - 2) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span>(!(rescaleFactor &gt; 0.7f &amp;&amp; rescaleFactor &lt; 1.4f))</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a00d8e52e0b0be0017b69986cea2330d7">num_stereo_rescale_oob</a>++;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="comment">// calculate values to search for</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordtype">float</span> realVal_p1 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(activeKeyFrameImageData,u + epxn*rescaleFactor, v + epyn*rescaleFactor, width);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordtype">float</span> realVal_m1 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(activeKeyFrameImageData,u - epxn*rescaleFactor, v - epyn*rescaleFactor, width);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keywordtype">float</span> realVal = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(activeKeyFrameImageData,u, v, width);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keywordtype">float</span> realVal_m2 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(activeKeyFrameImageData,u - 2*epxn*rescaleFactor, v - 2*epyn*rescaleFactor, width);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordtype">float</span> realVal_p2 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(activeKeyFrameImageData,u + 2*epxn*rescaleFactor, v + 2*epyn*rescaleFactor, width);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">//  if(referenceFrame-&gt;K_otherToThis_t[2] * max_idepth + pInf[2] &lt; 0.01)</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    Eigen::Vector3f pClose = pInf + referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a299bcddaca0539b927cc0e3a6ec5739b">K_otherToThis_t</a>*max_idepth;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="comment">// if the assumed close-point lies behind the</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// image, have to change that.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span>(pClose[2] &lt; 0.001f)</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        max_idepth = (0.001f-pInf[2]) / referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a299bcddaca0539b927cc0e3a6ec5739b">K_otherToThis_t</a>[2];</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        pClose = pInf + referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a299bcddaca0539b927cc0e3a6ec5739b">K_otherToThis_t</a>*max_idepth;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    }</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    pClose = pClose / pClose[2]; <span class="comment">// pos in new image of point (xy), assuming max_idepth</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    Eigen::Vector3f pFar = pInf + referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a299bcddaca0539b927cc0e3a6ec5739b">K_otherToThis_t</a>*min_idepth;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// if the assumed far-point lies behind the image or closter than the near-point,</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">// we moved past the Point it and should stop.</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">if</span>(pFar[2] &lt; 0.001f || max_idepth &lt; min_idepth)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a9834e14ca0d8a852fde16a5acd4302a0">num_stereo_inf_oob</a>++;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    pFar = pFar / pFar[2]; <span class="comment">// pos in new image of point (xy), assuming min_idepth</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">// check for nan due to eg division by zero.</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keywordflow">if</span>(isnanf((<span class="keywordtype">float</span>)(pFar[0]+pClose[0])))</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="keywordflow">return</span> -4;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="comment">// calculate increments in which we will step through the epipolar line.</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment">// they are sampleDist (or half sample dist) long</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordtype">float</span> incx = pClose[0] - pFar[0];</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordtype">float</span> incy = pClose[1] - pFar[1];</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordtype">float</span> eplLength = sqrt(incx*incx+incy*incy);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">if</span>(!eplLength &gt; 0 || std::isinf(eplLength)) <span class="keywordflow">return</span> -4;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">if</span>(eplLength &gt; <a class="code" href="../../de/d60/settings_8h.html#a2760610777badf27c5e434c5f2a9c2fb">MAX_EPL_LENGTH_CROP</a>)</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        pClose[0] = pFar[0] + incx*<a class="code" href="../../de/d60/settings_8h.html#a2760610777badf27c5e434c5f2a9c2fb">MAX_EPL_LENGTH_CROP</a>/eplLength;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        pClose[1] = pFar[1] + incy*<a class="code" href="../../de/d60/settings_8h.html#a2760610777badf27c5e434c5f2a9c2fb">MAX_EPL_LENGTH_CROP</a>/eplLength;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    incx *= <a class="code" href="../../de/d60/settings_8h.html#a0fbb1ed2b6428a6d1387f922ed5d8aec">GRADIENT_SAMPLE_DIST</a>/eplLength;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    incy *= <a class="code" href="../../de/d60/settings_8h.html#a0fbb1ed2b6428a6d1387f922ed5d8aec">GRADIENT_SAMPLE_DIST</a>/eplLength;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="comment">// extend one sample_dist to left &amp; right.</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    pFar[0] -= incx;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    pFar[1] -= incy;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    pClose[0] += incx;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    pClose[1] += incy;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="comment">// make epl long enough (pad a little bit).</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">if</span>(eplLength &lt; <a class="code" href="../../de/d60/settings_8h.html#a4a8bf201d526db90c23b6129ff94974c">MIN_EPL_LENGTH_CROP</a>)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <span class="keywordtype">float</span> pad = (<a class="code" href="../../de/d60/settings_8h.html#a4a8bf201d526db90c23b6129ff94974c">MIN_EPL_LENGTH_CROP</a> - (eplLength)) / 2.0f;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        pFar[0] -= incx*pad;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        pFar[1] -= incy*pad;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        pClose[0] += incx*pad;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        pClose[1] += incy*pad;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="comment">// if inf point is outside of image: skip pixel.</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">if</span>(</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            pFar[0] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;            pFar[0] &gt;= width-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            pFar[1] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            pFar[1] &gt;= height-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a>)</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a9834e14ca0d8a852fde16a5acd4302a0">num_stereo_inf_oob</a>++;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="comment">// if near point is outside: move inside, and test length again.</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordflow">if</span>(</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            pClose[0] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            pClose[0] &gt;= width-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            pClose[1] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;            pClose[1] &gt;= height-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a>)</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="keywordflow">if</span>(pClose[0] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a>)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <span class="keywordtype">float</span> toAdd = (<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> - pClose[0]) / incx;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            pClose[0] += toAdd * incx;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            pClose[1] += toAdd * incy;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        }</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pClose[0] &gt;= width-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a>)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            <span class="keywordtype">float</span> toAdd = (width-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> - pClose[0]) / incx;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            pClose[0] += toAdd * incx;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            pClose[1] += toAdd * incy;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        }</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">if</span>(pClose[1] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a>)</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            <span class="keywordtype">float</span> toAdd = (<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> - pClose[1]) / incy;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            pClose[0] += toAdd * incx;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            pClose[1] += toAdd * incy;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pClose[1] &gt;= height-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a>)</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;            <span class="keywordtype">float</span> toAdd = (height-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> - pClose[1]) / incy;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            pClose[0] += toAdd * incx;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            pClose[1] += toAdd * incy;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="comment">// get new epl length</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordtype">float</span> fincx = pClose[0] - pFar[0];</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordtype">float</span> fincy = pClose[1] - pFar[1];</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordtype">float</span> newEplLength = sqrt(fincx*fincx+fincy*fincy);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <span class="comment">// test again</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <span class="keywordflow">if</span>(</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                pClose[0] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                pClose[0] &gt;= width-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                pClose[1] &lt;= <a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                pClose[1] &gt;= height-<a class="code" href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a> ||</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                newEplLength &lt; 8.0f</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                )</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a639551f140700da5c64c8ea845ccb55a">num_stereo_near_oob</a>++;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="comment">// from here on:</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// - pInf: search start-point</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="comment">// - p0: search end-point</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="comment">// - incx, incy: search steps in pixel</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="comment">// - eplLength, min_idepth, max_idepth: determines search-resolution, i.e. the result&#39;s variance.</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordtype">float</span> cpx = pFar[0];</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordtype">float</span> cpy =  pFar[1];</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordtype">float</span> val_cp_m2 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(referenceFrameImage,cpx-2.0f*incx, cpy-2.0f*incy, width);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordtype">float</span> val_cp_m1 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(referenceFrameImage,cpx-incx, cpy-incy, width);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordtype">float</span> val_cp = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(referenceFrameImage,cpx, cpy, width);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordtype">float</span> val_cp_p1 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(referenceFrameImage,cpx+incx, cpy+incy, width);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordtype">float</span> val_cp_p2;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">     * Subsequent exact minimum is found the following way:</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment">     * - assuming lin. interpolation, the gradient of Error at p1 (towards p2) is given by</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment">     *   dE1 = -2sum(e1*e1 - e1*e2)</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">     *   where e1 and e2 are summed over, and are the residuals (not squared).</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">     * - the gradient at p2 (coming from p1) is given by</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">     *   dE2 = +2sum(e2*e2 - e1*e2)</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">     * - linear interpolation =&gt; gradient changes linearely; zero-crossing is hence given by</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment">     *   p1 + d*(p2-p1) with d = -dE1 / (-dE1 + dE2).</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="comment">     * =&gt; I for later exact min calculation, I need sum(e_i*e_i),sum(e_{i-1}*e_{i-1}),sum(e_{i+1}*e_{i+1})</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="comment">     *    and sum(e_i * e_{i-1}) and sum(e_i * e_{i+1}),</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">     *    where i is the respective winning index.</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">// walk in equally sized steps, starting at depth=infinity.</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordtype">int</span> loopCounter = 0;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordtype">float</span> best_match_x = -1;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordtype">float</span> best_match_y = -1;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordtype">float</span> best_match_err = 1e50;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordtype">float</span> second_best_match_err = 1e50;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="comment">// best pre and post errors.</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordtype">float</span> best_match_errPre=NAN, best_match_errPost=NAN, best_match_DiffErrPre=NAN, best_match_DiffErrPost=NAN;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordtype">bool</span> bestWasLastLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordtype">float</span> eeLast = -1; <span class="comment">// final error of last comp.</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="comment">// alternating intermediate vars</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordtype">float</span> e1A=NAN, e1B=NAN, e2A=NAN, e2B=NAN, e3A=NAN, e3B=NAN, e4A=NAN, e4B=NAN, e5A=NAN, e5B=NAN;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordtype">int</span> loopCBest=-1, loopCSecond =-1;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">while</span>(((incx &lt; 0) == (cpx &gt; pClose[0]) &amp;&amp; (incy &lt; 0) == (cpy &gt; pClose[1])) || loopCounter == 0)</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="comment">// interpolate one new point</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        val_cp_p2 = <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">getInterpolatedElement</a>(referenceFrameImage,cpx+2*incx, cpy+2*incy, width);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="comment">// hacky but fast way to get error and differential error: switch buffer variables for last loop.</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        <span class="keywordtype">float</span> ee = 0;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        <span class="keywordflow">if</span>(loopCounter%2==0)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            <span class="comment">// calc error and accumulate sums.</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            e1A = val_cp_p2 - realVal_p2;ee += e1A*e1A;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;            e2A = val_cp_p1 - realVal_p1;ee += e2A*e2A;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            e3A = val_cp - realVal;      ee += e3A*e3A;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            e4A = val_cp_m1 - realVal_m1;ee += e4A*e4A;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            e5A = val_cp_m2 - realVal_m2;ee += e5A*e5A;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        }</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            <span class="comment">// calc error and accumulate sums.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            e1B = val_cp_p2 - realVal_p2;ee += e1B*e1B;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            e2B = val_cp_p1 - realVal_p1;ee += e2B*e2B;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            e3B = val_cp - realVal;      ee += e3B*e3B;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            e4B = val_cp_m1 - realVal_m1;ee += e4B*e4B;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            e5B = val_cp_m2 - realVal_m2;ee += e5B*e5B;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        }</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="comment">// do I have a new winner??</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="comment">// if so: set.</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordflow">if</span>(ee &lt; best_match_err)</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            <span class="comment">// put to second-best</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            second_best_match_err=best_match_err;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            loopCSecond = loopCBest;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            <span class="comment">// set best.</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            best_match_err = ee;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            loopCBest = loopCounter;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            best_match_errPre = eeLast;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            best_match_DiffErrPre = e1A*e1B + e2A*e2B + e3A*e3B + e4A*e4B + e5A*e5B;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            best_match_errPost = -1;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            best_match_DiffErrPost = -1;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            best_match_x = cpx;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            best_match_y = cpy;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            bestWasLastLoop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="comment">// otherwise: the last might be the current winner, in which case i have to save these values.</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <span class="keywordflow">if</span>(bestWasLastLoop)</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            {</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                best_match_errPost = ee;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                best_match_DiffErrPost = e1A*e1B + e2A*e2B + e3A*e3B + e4A*e4B + e5A*e5B;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                bestWasLastLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            <span class="comment">// collect second-best:</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            <span class="comment">// just take the best of all that are NOT equal to current best.</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            <span class="keywordflow">if</span>(ee &lt; second_best_match_err)</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                second_best_match_err=ee;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                loopCSecond = loopCounter;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="comment">// shift everything one further.</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        eeLast = ee;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        val_cp_m2 = val_cp_m1; val_cp_m1 = val_cp; val_cp = val_cp_p1; val_cp_p1 = val_cp_p2;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a3ffa3606131f0e84d1baa57b0b14e736">num_stereo_comparisons</a>++;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        cpx += incx;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        cpy += incy;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        loopCounter++;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="comment">// if error too big, will return -3, otherwise -2.</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">if</span>(best_match_err &gt; 4.0f*(<span class="keywordtype">float</span>)<a class="code" href="../../de/d60/settings_8h.html#a077ca61b893315c7122d02805edb897e">MAX_ERROR_STEREO</a>)</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    {</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0d7c8c678e78374aa67778e5eacce1da">num_stereo_invalid_bigErr</a>++;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        <span class="keywordflow">return</span> -3;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="comment">// check if clear enough winner</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">if</span>(abs(loopCBest - loopCSecond) &gt; 1.0f &amp;&amp; <a class="code" href="../../de/d60/settings_8h.html#a905316cf8e65fc1a6ebeb313ced4cee7">MIN_DISTANCE_ERROR_STEREO</a> * best_match_err &gt; second_best_match_err)</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a17c81987dad49a1a791d3ce8619a3bea">num_stereo_invalid_unclear_winner</a>++;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="keywordflow">return</span> -2;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    }</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordtype">bool</span> didSubpixel = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#aa92febcbae5cd0bd56e0f5231976c995">useSubpixelStereo</a>)</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <span class="comment">// ================== compute exact match =========================</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <span class="comment">// compute gradients (they are actually only half the real gradient)</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        <span class="keywordtype">float</span> gradPre_pre = -(best_match_errPre - best_match_DiffErrPre);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordtype">float</span> gradPre_this = +(best_match_err - best_match_DiffErrPre);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordtype">float</span> gradPost_this = -(best_match_err - best_match_DiffErrPost);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordtype">float</span> gradPost_post = +(best_match_errPost - best_match_DiffErrPost);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        <span class="comment">// final decisions here.</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordtype">bool</span> interpPost = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        <span class="keywordtype">bool</span> interpPre = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="comment">// if one is oob: return false.</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; (best_match_errPre &lt; 0 || best_match_errPost &lt; 0))</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa702bd7825604257e1fcfa3b8961eef1">num_stereo_invalid_atEnd</a>++;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="comment">// - if zero-crossing occurs exactly in between (gradient Inconsistent),</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((gradPost_this &lt; 0) ^ (gradPre_this &lt; 0))</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="comment">// return exact pos, if both central gradients are small compared to their counterpart.</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; (gradPost_this*gradPost_this &gt; 0.1f*0.1f*gradPost_post*gradPost_post ||</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;               gradPre_this*gradPre_this &gt; 0.1f*0.1f*gradPre_pre*gradPre_pre))</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a29a637bd4733ae6998e0e62a5ffcbeaf">num_stereo_invalid_inexistantCrossing</a>++;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="comment">// if pre has zero-crossing</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((gradPre_pre &lt; 0) ^ (gradPre_this &lt; 0))</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        {</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            <span class="comment">// if post has zero-crossing</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            <span class="keywordflow">if</span>((gradPost_post &lt; 0) ^ (gradPost_this &lt; 0))</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aedf9a1f1a22813d2fde22132039a6600">num_stereo_invalid_twoCrossing</a>++;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                interpPre = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        }</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="comment">// if post has zero-crossing</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((gradPost_post &lt; 0) ^ (gradPost_this &lt; 0))</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            interpPost = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        <span class="comment">// if none has zero-crossing</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad030f2d1aec3b1782e3c25c2ed92de2d">num_stereo_invalid_noCrossing</a>++;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <span class="comment">// DO interpolation!</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="comment">// minimum occurs at zero-crossing of gradient, which is a straight line =&gt; easy to compute.</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="comment">// the error at that point is also computed by just integrating.</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="keywordflow">if</span>(interpPre)</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <span class="keywordtype">float</span> d = gradPre_this / (gradPre_this - gradPre_pre);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            best_match_x -= d*incx;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            best_match_y -= d*incy;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            best_match_err = best_match_err - 2*d*gradPre_this - (gradPre_pre - gradPre_this)*d*d;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac5fe9c500f2621c4545d21d009766278">num_stereo_interpPre</a>++;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            didSubpixel = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        }</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(interpPost)</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordtype">float</span> d = gradPost_this / (gradPost_this - gradPost_post);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            best_match_x += d*incx;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            best_match_y += d*incy;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            best_match_err = best_match_err + 2*d*gradPost_this + (gradPost_post - gradPost_this)*d*d;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad4dd2b50e966ab0ec29d5d49a016deb3">num_stereo_interpPost</a>++;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            didSubpixel = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        }</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a461560cbd64d526a1248d78c1def44f2">num_stereo_interpNone</a>++;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="comment">// sampleDist is the distance in pixel at which the realVal&#39;s were sampled</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordtype">float</span> sampleDist = <a class="code" href="../../de/d60/settings_8h.html#a0fbb1ed2b6428a6d1387f922ed5d8aec">GRADIENT_SAMPLE_DIST</a>*rescaleFactor;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordtype">float</span> gradAlongLine = 0;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordtype">float</span> tmp = realVal_p2 - realVal_p1;  gradAlongLine+=tmp*tmp;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    tmp = realVal_p1 - realVal;  gradAlongLine+=tmp*tmp;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    tmp = realVal - realVal_m1;  gradAlongLine+=tmp*tmp;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    tmp = realVal_m1 - realVal_m2;  gradAlongLine+=tmp*tmp;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    gradAlongLine /= sampleDist*sampleDist;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="comment">// check if interpolated error is OK. use evil hack to allow more error if there is a lot of gradient.</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">if</span>(best_match_err &gt; (<span class="keywordtype">float</span>)MAX_ERROR_STEREO + sqrtf( gradAlongLine)*20)</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0d7c8c678e78374aa67778e5eacce1da">num_stereo_invalid_bigErr</a>++;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <span class="keywordflow">return</span> -3;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    }</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="comment">// ================= calc depth (in KF) ====================</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="comment">// * KinvP = Kinv * (x,y,1); where x,y are pixel coordinates of point we search for, in the KF.</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="comment">// * best_match_x = x-coordinate of found correspondence in the reference frame.</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordtype">float</span> idnew_best_match; <span class="comment">// depth in the new image</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordtype">float</span> alpha; <span class="comment">// d(idnew_best_match) / d(disparity in pixel) == conputed inverse depth derived by the pixel-disparity.</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordflow">if</span>(incx*incx&gt;incy*incy)</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    {</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordtype">float</span> oldX = fxi*best_match_x+cxi;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordtype">float</span> nominator = (oldX*referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[2] - referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[0]);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        <span class="keywordtype">float</span> dot0 = KinvP.dot(referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#acc99c43a91d9a928885536632ed9b701">otherToThis_R_row0</a>);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <span class="keywordtype">float</span> dot2 = KinvP.dot(referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa94f79b5dd632a55a7069a57f45927a1">otherToThis_R_row2</a>);</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        idnew_best_match = (dot0 - oldX*dot2) / nominator;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        alpha = incx*fxi*(dot0*referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[2] - dot2*referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[0]) / (nominator*nominator);</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        <span class="keywordtype">float</span> oldY = fyi*best_match_y+cyi;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        <span class="keywordtype">float</span> nominator = (oldY*referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[2] - referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[1]);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        <span class="keywordtype">float</span> dot1 = KinvP.dot(referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a9e73fe70e8b2b845d83663513a7cee31">otherToThis_R_row1</a>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        <span class="keywordtype">float</span> dot2 = KinvP.dot(referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#aa94f79b5dd632a55a7069a57f45927a1">otherToThis_R_row2</a>);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        idnew_best_match = (dot1 - oldY*dot2) / nominator;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        alpha = incy*fyi*(dot1*referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[2] - dot2*referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">otherToThis_t</a>[1]) / (nominator*nominator);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    }</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span>(idnew_best_match &lt; 0)</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aebcdfe759c972a610f79f3a568b602a1">num_stereo_negative</a>++;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="../../dc/dca/namespacelsd__slam.html#ae7b46fd44c8b8c632d2e85c68d718508">allowNegativeIdepths</a>)</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            <span class="keywordflow">return</span> -2;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a>) stats-&gt;<a class="code" href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae97a90b0e98f973df41d1c91880dfb2e">num_stereo_successfull</a>++;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="comment">// ================= calc var (in NEW image) ====================</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="comment">// calculate error from photometric noise</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordtype">float</span> photoDispError = 4.0f * <a class="code" href="../../dc/dca/namespacelsd__slam.html#a309c4f704b42ab2d2e9912e11c211808">cameraPixelNoise2</a> / (gradAlongLine + <a class="code" href="../../de/d60/settings_8h.html#a6431ecbd243f3b0cd0f63a875ea3931f">DIVISION_EPS</a>);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="keywordtype">float</span> trackingErrorFac = 0.25f*(1.0f+referenceFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac58ef4a32c0d5052e3722da6ff84d07d">initialTrackedResidual</a>);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="comment">// calculate error from geometric noise (wrong camera pose / calibration)</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    Eigen::Vector2f gradsInterp = <a class="code" href="../../dc/dca/namespacelsd__slam.html#a0388a1bf084d3fe8136aa11bc2206a2e">getInterpolatedElement42</a>(activeKeyFrame-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a2c31baa0cea975fb73ccf80d92f7a5de">gradients</a>(0), u, v, width);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordtype">float</span> geoDispError = (gradsInterp[0]*epxn + gradsInterp[1]*epyn) + <a class="code" href="../../de/d60/settings_8h.html#a6431ecbd243f3b0cd0f63a875ea3931f">DIVISION_EPS</a>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    geoDispError = trackingErrorFac*trackingErrorFac*(gradsInterp[0]*gradsInterp[0] + gradsInterp[1]*gradsInterp[1]) / (geoDispError*geoDispError);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="comment">//geoDispError *= (0.5 + 0.5 *result_idepth) * (0.5 + 0.5 *result_idepth);</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="comment">// final error consists of a small constant part (discretization error),</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="comment">// geometric and photometric error.</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    result_var = alpha*alpha*((didSubpixel ? 0.05f : 0.5f)*sampleDist*sampleDist +  geoDispError + photoDispError); <span class="comment">// square to make variance</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">plotStereoImages</a>)</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        <span class="keywordflow">if</span>(rand()%5==0)</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            <span class="comment">//if(rand()%500 == 0)</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            <span class="comment">//  printf(&quot;geo: %f, photo: %f, alpha: %f\n&quot;, sqrt(geoDispError), sqrt(photoDispError), alpha, sqrt(result_var));</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            <span class="comment">//int idDiff = (keyFrame-&gt;pyramidID - referenceFrame-&gt;id);</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;            <span class="comment">//cv::Scalar color = cv::Scalar(0,0, 2*idDiff);// bw</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            <span class="comment">//cv::Scalar color = cv::Scalar(sqrt(result_var)*2000, 255-sqrt(result_var)*2000, 0);// bw</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">//          float eplLengthF = std::min((float)MIN_EPL_LENGTH_CROP,(float)eplLength);</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">//          eplLengthF = std::max((float)MAX_EPL_LENGTH_CROP,(float)eplLengthF);</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">//          float pixelDistFound = sqrtf((float)((pReal[0]/pReal[2] - best_match_x)*(pReal[0]/pReal[2] - best_match_x)</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="comment">//                  + (pReal[1]/pReal[2] - best_match_y)*(pReal[1]/pReal[2] - best_match_y)));</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            <span class="keywordtype">float</span> fac = best_match_err / ((float)MAX_ERROR_STEREO + sqrtf( gradAlongLine)*20);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            cv::Scalar color = cv::Scalar(255*fac, 255-255*fac, 0);<span class="comment">// bw</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">            if(rescaleFactor &gt; 1)</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">                color = cv::Scalar(500*(rescaleFactor-1),0,0);</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">            else</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">                color = cv::Scalar(0,500*(1-rescaleFactor),500*(1-rescaleFactor));</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment">            */</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            cv::line(<a class="code" href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">debugImageStereoLines</a>,cv::Point2f(pClose[0], pClose[1]),cv::Point2f(pFar[0], pFar[1]),color,1,8,0);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        }</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    result_idepth = idnew_best_match;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    result_eplLength = eplLength;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    <span class="keywordflow">return</span> best_match_err;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;}</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;}</div>
<div class="ttc" id="settings_8h_html_a5f0b23e85b9f1f3aab9e06b538c3c4bf"><div class="ttname"><a href="../../de/d60/settings_8h.html#a5f0b23e85b9f1f3aab9e06b538c3c4bf">VAL_SUM_MIN_FOR_UNBLACKLIST</a></div><div class="ttdeci">#define VAL_SUM_MIN_FOR_UNBLACKLIST</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00064">settings.h:64</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_af73ccb75e1e449d9a8f2044246ee3530"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#af73ccb75e1e449d9a8f2044246ee3530">lsd_slam::Frame::getActiveLock</a></div><div class="ttdeci">boost::shared_lock&lt; boost::shared_mutex &gt; getActiveLock()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00138">Frame.h:138</a></div></div>
<div class="ttc" id="settings_8h_html_ad58e83a96292a9255350da95c778bd2e"><div class="ttname"><a href="../../de/d60/settings_8h.html#ad58e83a96292a9255350da95c778bd2e">MIN_EPL_LENGTH_SQUARED</a></div><div class="ttdeci">#define MIN_EPL_LENGTH_SQUARED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00153">settings.h:153</a></div></div>
<div class="ttc" id="settings_8h_html_afd365e2f7fb721ad9a636989102e5164"><div class="ttname"><a href="../../de/d60/settings_8h.html#afd365e2f7fb721ad9a636989102e5164">VAL_SUM_MIN_FOR_CREATE</a></div><div class="ttdeci">#define VAL_SUM_MIN_FOR_CREATE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00062">settings.h:62</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_aed7adc9d8d2112785b63eef9899cb1cd"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#aed7adc9d8d2112785b63eef9899cb1cd">lsd_slam::DepthMap::nAvgCreate</a></div><div class="ttdeci">float nAvgCreate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00092">DepthMap.h:92</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a82037faec3cabf13bf96976c8076735e"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a82037faec3cabf13bf96976c8076735e">lsd_slam::DepthMap::~DepthMap</a></div><div class="ttdeci">~DepthMap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l00085">DepthMap.cpp:85</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a86997fec300a6e9f1646eb1f073d91a4"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a86997fec300a6e9f1646eb1f073d91a4">lsd_slam::DepthMap::nObserve</a></div><div class="ttdeci">int nObserve</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00090">DepthMap.h:90</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aa99ef28d1e686d2eb1a3cc9378957361"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa99ef28d1e686d2eb1a3cc9378957361">lsd_slam::RunningStats::num_observe_state_initializing</a></div><div class="ttdeci">int num_observe_state_initializing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00302">settings.h:302</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a0388a1bf084d3fe8136aa11bc2206a2e"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a0388a1bf084d3fe8136aa11bc2206a2e">lsd_slam::getInterpolatedElement42</a></div><div class="ttdeci">Eigen::Vector2f getInterpolatedElement42(const Eigen::Vector4f *const mat, const float x, const float y, const int width)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/globalFuncs_8h_source.html#l00095">globalFuncs.h:95</a></div></div>
<div class="ttc" id="settings_8h_html_a6218447cb39a36244ad870b53ceaafd0"><div class="ttname"><a href="../../de/d60/settings_8h.html#a6218447cb39a36244ad870b53ceaafd0">MIN_BLACKLIST</a></div><div class="ttdeci">#define MIN_BLACKLIST</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00066">settings.h:66</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a3f14a1c43b6cb21d31274f880b0bf36b"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a3f14a1c43b6cb21d31274f880b0bf36b">lsd_slam::Frame::width</a></div><div class="ttdeci">int width(int level=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00300">Frame.h:300</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_ad43f276ef4edee8420460b452929aad4"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad43f276ef4edee8420460b452929aad4">lsd_slam::DepthMap::initializeRandomly</a></div><div class="ttdeci">void initializeRandomly(Frame *new_frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l00883">DepthMap.cpp:883</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_aa92febcbae5cd0bd56e0f5231976c995"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#aa92febcbae5cd0bd56e0f5231976c995">lsd_slam::useSubpixelStereo</a></div><div class="ttdeci">bool useSubpixelStereo</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00086">settings.cpp:86</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a4406c1e00b408b0276d50dcb2176cc74"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a4406c1e00b408b0276d50dcb2176cc74">lsd_slam::RunningStats::num_observe_good</a></div><div class="ttdeci">int num_observe_good</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00299">settings.h:299</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a3ec6d916f8712382ba9052c00db98148"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3ec6d916f8712382ba9052c00db98148">lsd_slam::DepthMap::nAvgRegularize</a></div><div class="ttdeci">float nAvgRegularize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00093">DepthMap.h:93</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_abce0e214e1c57815a67dd4b904801243"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#abce0e214e1c57815a67dd4b904801243">lsd_slam::RunningStats::num_observe_state_finalizing</a></div><div class="ttdeci">int num_observe_state_finalizing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00301">settings.h:301</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ac3f1446413cb96241a1621ccd935306b"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac3f1446413cb96241a1621ccd935306b">lsd_slam::RunningStats::num_reg_setBlacklisted</a></div><div class="ttdeci">int num_reg_setBlacklisted</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00333">settings.h:333</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a0e09455f3a738f3ec4bee9245920aa93"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0e09455f3a738f3ec4bee9245920aa93">lsd_slam::RunningStats::num_observe_notfound_finalizing</a></div><div class="ttdeci">int num_observe_notfound_finalizing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00295">settings.h:295</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a01b2c6e4c011b44a98b50bfbf8d91ddb"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a01b2c6e4c011b44a98b50bfbf8d91ddb">lsd_slam::DepthMap::nAvgSetDepth</a></div><div class="ttdeci">float nAvgSetDepth</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00093">DepthMap.h:93</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a00d8e52e0b0be0017b69986cea2330d7"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a00d8e52e0b0be0017b69986cea2330d7">lsd_slam::RunningStats::num_stereo_rescale_oob</a></div><div class="ttdeci">int num_stereo_rescale_oob</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00266">settings.h:266</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_ad296834582dab62c4621eac896c30bee"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad296834582dab62c4621eac896c30bee">lsd_slam::DepthMap::nFillHoles</a></div><div class="ttdeci">int nFillHoles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00090">DepthMap.h:90</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_aab79f2a5a9f59c2cf2b9714ad48c53ae"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#aab79f2a5a9f59c2cf2b9714ad48c53ae">lsd_slam::Frame::takeReActivationData</a></div><div class="ttdeci">void takeReActivationData(DepthMapPixelHypothesis *depthMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de0/Frame_8cpp_source.html#l00107">Frame.cpp:107</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a29a637bd4733ae6998e0e62a5ffcbeaf"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a29a637bd4733ae6998e0e62a5ffcbeaf">lsd_slam::RunningStats::num_stereo_invalid_inexistantCrossing</a></div><div class="ttdeci">int num_stereo_invalid_inexistantCrossing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00271">settings.h:271</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_ad639f2fda59ef3ceeb6604853968efd3"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#ad639f2fda59ef3ceeb6604853968efd3">lsd_slam::DepthMap::msCreate</a></div><div class="ttdeci">float msCreate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00087">DepthMap.h:87</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ad4dd2b50e966ab0ec29d5d49a016deb3"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad4dd2b50e966ab0ec29d5d49a016deb3">lsd_slam::RunningStats::num_stereo_interpPost</a></div><div class="ttdeci">int num_stereo_interpPost</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00276">settings.h:276</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a8078cd87bf8b167bd24216291bc0b340"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8078cd87bf8b167bd24216291bc0b340">lsd_slam::DepthMap::msObserve</a></div><div class="ttdeci">float msObserve</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00088">DepthMap.h:88</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ab448a7720cc9f5eac710b4885fe76ab5"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ab448a7720cc9f5eac710b4885fe76ab5">lsd_slam::RunningStats::num_observe_update_attempted</a></div><div class="ttdeci">int num_observe_update_attempted</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00312">settings.h:312</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a13ddf75d2d4e77268131edce09f9579a"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a13ddf75d2d4e77268131edce09f9579a">lsd_slam::RunningStats::num_observe_skipped_small_epl_grad</a></div><div class="ttdeci">int num_observe_skipped_small_epl_grad</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00286">settings.h:286</a></div></div>
<div class="ttc" id="settings_8h_html_af8c6f6086621142925a9b0cdfdb6a642"><div class="ttname"><a href="../../de/d60/settings_8h.html#af8c6f6086621142925a9b0cdfdb6a642">MIN_EPL_GRAD_SQUARED</a></div><div class="ttdeci">#define MIN_EPL_GRAD_SQUARED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00152">settings.h:152</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a28bf86e401d96db20a30a9796677c9f0"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a28bf86e401d96db20a30a9796677c9f0">lsd_slam::DepthMap::msFillHoles</a></div><div class="ttdeci">float msFillHoles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00088">DepthMap.h:88</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_ac58ef4a32c0d5052e3722da6ff84d07d"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#ac58ef4a32c0d5052e3722da6ff84d07d">lsd_slam::Frame::initialTrackedResidual</a></div><div class="ttdeci">float initialTrackedResidual</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00197">Frame.h:197</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a9834e14ca0d8a852fde16a5acd4302a0"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a9834e14ca0d8a852fde16a5acd4302a0">lsd_slam::RunningStats::num_stereo_inf_oob</a></div><div class="ttdeci">int num_stereo_inf_oob</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00267">settings.h:267</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aa702bd7825604257e1fcfa3b8961eef1"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa702bd7825604257e1fcfa3b8961eef1">lsd_slam::RunningStats::num_stereo_invalid_atEnd</a></div><div class="ttdeci">int num_stereo_invalid_atEnd</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00270">settings.h:270</a></div></div>
<div class="ttc" id="classSophus_1_1SE3GroupBase_html_a1b47e7c7329fecdc289f95094248ccfe"><div class="ttname"><a href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">Sophus::SE3GroupBase::inverse</a></div><div class="ttdeci">const SE3Group&lt; Scalar &gt; inverse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d4b/se3_8hpp_source.html#l00169">se3.hpp:169</a></div></div>
<div class="ttc" id="settings_8h_html_a785860383d41a576bfae9bb54354b84e"><div class="ttname"><a href="../../de/d60/settings_8h.html#a785860383d41a576bfae9bb54354b84e">VAR_RANDOM_INIT_INITIAL</a></div><div class="ttdeci">#define VAR_RANDOM_INIT_INITIAL</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00077">settings.h:77</a></div></div>
<div class="ttc" id="settings_8h_html_ac5d5eafc489f08a0ab86da387447db93"><div class="ttname"><a href="../../de/d60/settings_8h.html#ac5d5eafc489f08a0ab86da387447db93">VAR_GT_INIT_INITIAL</a></div><div class="ttdeci">#define VAR_GT_INIT_INITIAL</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00076">settings.h:76</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a0f4a92d51569c280e4b37acbf562ea47"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a0f4a92d51569c280e4b37acbf562ea47">lsd_slam::Frame::getScaledCamToWorld</a></div><div class="ttdeci">Sim3 getScaledCamToWorld(int num=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00150">Frame.h:150</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_af4b1dbbafb28400c67581b32f39e3c65"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#af4b1dbbafb28400c67581b32f39e3c65">lsd_slam::DepthMap::debugImageHypothesisPropagation</a></div><div class="ttdeci">cv::Mat debugImageHypothesisPropagation</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00077">DepthMap.h:77</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a0e33cc989142a9266f582df4931fbd52"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a0e33cc989142a9266f582df4931fbd52">lsd_slam::Frame::numFramesTrackedOnThis</a></div><div class="ttdeci">int numFramesTrackedOnThis</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00198">Frame.h:198</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMapPixelHypothesis_html_ad59c8017a906e51e3ab3b104b68da64b"><div class="ttname"><a href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#ad59c8017a906e51e3ab3b104b68da64b">lsd_slam::DepthMapPixelHypothesis::getVisualizationColor</a></div><div class="ttdeci">cv::Vec3b getVisualizationColor(int lastFrameID) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd0/DepthMapPixelHypothesis_8cpp_source.html#l00029">DepthMapPixelHypothesis.cpp:29</a></div></div>
<div class="ttc" id="classSophus_1_1Sim3Group_html"><div class="ttname"><a href="../../de/d0b/classSophus_1_1Sim3Group.html">Sophus::Sim3Group</a></div><div class="ttdoc">Sim3 default type - Constructors and default storage for Sim3 Type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/sim3_8hpp_source.html#l00033">sim3.hpp:33</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a013921be6869702deac98090a8c9033c"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a013921be6869702deac98090a8c9033c">lsd_slam::Frame::hasTrackingParent</a></div><div class="ttdeci">bool hasTrackingParent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00151">Frame.h:151</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a2447e3447316b2803b20542e70e10785"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a2447e3447316b2803b20542e70e10785">lsd_slam::Frame::depthHasBeenUpdatedFlag</a></div><div class="ttdeci">bool depthHasBeenUpdatedFlag</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00168">Frame.h:168</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aecd39056f5799f1252295775f35ddf19"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aecd39056f5799f1252295775f35ddf19">lsd_slam::RunningStats::num_observe_transit_idle_oob</a></div><div class="ttdeci">int num_observe_transit_idle_oob</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00289">settings.h:289</a></div></div>
<div class="ttc" id="settings_8h_html_a63d2170a6d2d11705d1afc36b79df4bd"><div class="ttname"><a href="../../de/d60/settings_8h.html#a63d2170a6d2d11705d1afc36b79df4bd">VALIDITY_COUNTER_DEC</a></div><div class="ttdeci">#define VALIDITY_COUNTER_DEC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00058">settings.h:58</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a9e73fe70e8b2b845d83663513a7cee31"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a9e73fe70e8b2b845d83663513a7cee31">lsd_slam::Frame::otherToThis_R_row1</a></div><div class="ttdeci">Eigen::Vector3f otherToThis_R_row1</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00190">Frame.h:190</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a19d8063bd003c9e70e2ef925992a9046"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a19d8063bd003c9e70e2ef925992a9046">lsd_slam::RunningStats::num_observe_transit_finalizing</a></div><div class="ttdeci">int num_observe_transit_finalizing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00288">settings.h:288</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a4ff87802d5bcafda551ffb2506f7192e"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a4ff87802d5bcafda551ffb2506f7192e">lsd_slam::Frame::calculateMeanInformation</a></div><div class="ttdeci">void calculateMeanInformation()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de0/Frame_8cpp_source.html#l00176">Frame.cpp:176</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a21bd82ff3888237a8fa5cfb8612adc2f"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a21bd82ff3888237a8fa5cfb8612adc2f">lsd_slam::RunningStats::num_pixelInterpolations</a></div><div class="ttdeci">int num_pixelInterpolations</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00264">settings.h:264</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_af69ecb1d5574427ce9ad6c8f6d1541fa"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#af69ecb1d5574427ce9ad6c8f6d1541fa">lsd_slam::RunningStats::num_observe_updated</a></div><div class="ttdeci">int num_observe_updated</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00284">settings.h:284</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a131839c5289fea45b006d9177bab12aa"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a131839c5289fea45b006d9177bab12aa">lsd_slam::DepthMap::nAvgUpdate</a></div><div class="ttdeci">float nAvgUpdate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00092">DepthMap.h:92</a></div></div>
<div class="ttc" id="settings_8h_html_a0fbb1ed2b6428a6d1387f922ed5d8aec"><div class="ttname"><a href="../../de/d60/settings_8h.html#a0fbb1ed2b6428a6d1387f922ed5d8aec">GRADIENT_SAMPLE_DIST</a></div><div class="ttdeci">#define GRADIENT_SAMPLE_DIST</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00120">settings.h:120</a></div></div>
<div class="ttc" id="settings_8h_html_aeb0fddac678acca13a8cd42c752e928d"><div class="ttname"><a href="../../de/d60/settings_8h.html#aeb0fddac678acca13a8cd42c752e928d">MIN_EPL_ANGLE_SQUARED</a></div><div class="ttdeci">#define MIN_EPL_ANGLE_SQUARED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00154">settings.h:154</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_acb27b62a7248eb9a108adcef78541aff"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#acb27b62a7248eb9a108adcef78541aff">lsd_slam::DepthMap::nFinalize</a></div><div class="ttdeci">int nFinalize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00089">DepthMap.h:89</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMapPixelHypothesis_html_abfc19276c22e1c4fae82f61054a4579f"><div class="ttname"><a href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#abfc19276c22e1c4fae82f61054a4579f">lsd_slam::DepthMapPixelHypothesis::idepth</a></div><div class="ttdeci">float idepth</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/DepthMapPixelHypothesis_8h_source.html#l00055">DepthMapPixelHypothesis.h:55</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aa5ec07e003468dcf5b9baaa00976e5b8"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa5ec07e003468dcf5b9baaa00976e5b8">lsd_slam::RunningStats::num_reg_deleted_secondary</a></div><div class="ttdeci">int num_reg_deleted_secondary</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00330">settings.h:330</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a28d3143c38eb4d6e35bee6c8270faa2c"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a28d3143c38eb4d6e35bee6c8270faa2c">lsd_slam::RunningStats::num_observe_skip_fail</a></div><div class="ttdeci">int num_observe_skip_fail</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00297">settings.h:297</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a0b26845d846249e909e6ab0adc022ebf"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a0b26845d846249e909e6ab0adc022ebf">lsd_slam::Frame::maxGradients</a></div><div class="ttdeci">const float * maxGradients(int level=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00369">Frame.h:369</a></div></div>
<div class="ttc" id="settings_8h_html_aaaff1d95bfed394db16c5f6c7a2868b3"><div class="ttname"><a href="../../de/d60/settings_8h.html#aaaff1d95bfed394db16c5f6c7a2868b3">VALIDITY_COUNTER_MAX_VARIABLE</a></div><div class="ttdeci">#define VALIDITY_COUNTER_MAX_VARIABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00055">settings.h:55</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a17c81987dad49a1a791d3ce8619a3bea"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a17c81987dad49a1a791d3ce8619a3bea">lsd_slam::RunningStats::num_stereo_invalid_unclear_winner</a></div><div class="ttdeci">int num_stereo_invalid_unclear_winner</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00269">settings.h:269</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a637cbf76ea7e04193cc20dc703d2ccc0"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a637cbf76ea7e04193cc20dc703d2ccc0">lsd_slam::DepthMap::debugImageDepth</a></div><div class="ttdeci">cv::Mat debugImageDepth</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00079">DepthMap.h:79</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a0dcc58a8dc867b4d2996e373323951c2"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0dcc58a8dc867b4d2996e373323951c2">lsd_slam::RunningStats::num_observe_skip_alreadyGood</a></div><div class="ttdeci">int num_observe_skip_alreadyGood</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00305">settings.h:305</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMapPixelHypothesis_html_a56802b2f4413dd295383d142a3499808"><div class="ttname"><a href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a56802b2f4413dd295383d142a3499808">lsd_slam::DepthMapPixelHypothesis::validity_counter</a></div><div class="ttdeci">int validity_counter</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/DepthMapPixelHypothesis_8h_source.html#l00052">DepthMapPixelHypothesis.h:52</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a6a7921e214fe4b46d7252444c9f66f6b"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a6a7921e214fe4b46d7252444c9f66f6b">lsd_slam::RunningStats::num_reg_deleted_occluded</a></div><div class="ttdeci">int num_reg_deleted_occluded</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00331">settings.h:331</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_aec14e9e02389be3d29fb49a0897853ab"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#aec14e9e02389be3d29fb49a0897853ab">lsd_slam::debugDisplay</a></div><div class="ttdeci">int debugDisplay</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00035">settings.cpp:35</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a31cf48ff8a69f642783d39fc5b3cdda8"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a31cf48ff8a69f642783d39fc5b3cdda8">lsd_slam::RunningStats::num_observe_inconsistent_finalizing</a></div><div class="ttdeci">int num_observe_inconsistent_finalizing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00292">settings.h:292</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_afcfeb429836396cc14f8aa84507d0569"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#afcfeb429836396cc14f8aa84507d0569">lsd_slam::RunningStats::num_observe_transit_idle_scale_angle</a></div><div class="ttdeci">int num_observe_transit_idle_scale_angle</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00290">settings.h:290</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_af7cbf86575ab7581f6299cad045e311b"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#af7cbf86575ab7581f6299cad045e311b">lsd_slam::printPropagationStatistics</a></div><div class="ttdeci">bool printPropagationStatistics</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00043">settings.cpp:43</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a639551f140700da5c64c8ea845ccb55a"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a639551f140700da5c64c8ea845ccb55a">lsd_slam::RunningStats::num_stereo_near_oob</a></div><div class="ttdeci">int num_stereo_near_oob</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00268">settings.h:268</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a14bb7c06477c1b139c3b26074290b887"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a14bb7c06477c1b139c3b26074290b887">lsd_slam::RunningStats::num_stereo_calls</a></div><div class="ttdeci">int num_stereo_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00263">settings.h:263</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a0937f9a26f5d259ddef6865ee1f82994"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a0937f9a26f5d259ddef6865ee1f82994">lsd_slam::printMappingTiming</a></div><div class="ttdeci">bool printMappingTiming</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00062">settings.cpp:62</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ae97a90b0e98f973df41d1c91880dfb2e"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae97a90b0e98f973df41d1c91880dfb2e">lsd_slam::RunningStats::num_stereo_successfull</a></div><div class="ttdeci">int num_stereo_successfull</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00279">settings.h:279</a></div></div>
<div class="ttc" id="ImageDisplay_8h_html"><div class="ttname"><a href="../../d8/d3f/ImageDisplay_8h.html">ImageDisplay.h</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a3ffa3606131f0e84d1baa57b0b14e736"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a3ffa3606131f0e84d1baa57b0b14e736">lsd_slam::RunningStats::num_stereo_comparisons</a></div><div class="ttdeci">int num_stereo_comparisons</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00262">settings.h:262</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMapPixelHypothesis_html_a82ac6c0b56d05a755373fdf23a9cacb2"><div class="ttname"><a href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a82ac6c0b56d05a755373fdf23a9cacb2">lsd_slam::DepthMapPixelHypothesis::idepth_smoothed</a></div><div class="ttdeci">float idepth_smoothed</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/DepthMapPixelHypothesis_8h_source.html#l00059">DepthMapPixelHypothesis.h:59</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a8e425cd5c9a68bbb156cb5d7e67c6d4d"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a8e425cd5c9a68bbb156cb5d7e67c6d4d">lsd_slam::DepthMap::msPropagate</a></div><div class="ttdeci">float msPropagate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00088">DepthMap.h:88</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a30d6435ab093553615696f68e3a157d8"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a30d6435ab093553615696f68e3a157d8">lsd_slam::DepthMap::finalizeKeyFrame</a></div><div class="ttdeci">void finalizeKeyFrame()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l01363">DepthMap.cpp:1363</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_af32d1f6c7d1ce616de6514bcaace4be3"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#af32d1f6c7d1ce616de6514bcaace4be3">lsd_slam::printLineStereoStatistics</a></div><div class="ttdeci">bool printLineStereoStatistics</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00048">settings.cpp:48</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a132a07db925c925c01464fc175027255"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a132a07db925c925c01464fc175027255">lsd_slam::RunningStats::num_reg_smeared</a></div><div class="ttdeci">int num_reg_smeared</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00328">settings.h:328</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aebcdfe759c972a610f79f3a568b602a1"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aebcdfe759c972a610f79f3a568b602a1">lsd_slam::RunningStats::num_stereo_negative</a></div><div class="ttdeci">int num_stereo_negative</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00278">settings.h:278</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a2f7e88ddbe374e4fe52014eac1364578"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a2f7e88ddbe374e4fe52014eac1364578">lsd_slam::RunningStats::num_prop_removed_colorDiff</a></div><div class="ttdeci">int num_prop_removed_colorDiff</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00318">settings.h:318</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a66d43d94167308e80a8814dcaaecf91d"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a66d43d94167308e80a8814dcaaecf91d">lsd_slam::printObservePurgeStatistics</a></div><div class="ttdeci">bool printObservePurgeStatistics</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00046">settings.cpp:46</a></div></div>
<div class="ttc" id="settings_8h_html_a912fe4a9618fb40818285cd2ebdccbef"><div class="ttname"><a href="../../de/d60/settings_8h.html#a912fe4a9618fb40818285cd2ebdccbef">FAIL_VAR_INC_FAC</a></div><div class="ttdeci">#define FAIL_VAR_INC_FAC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00073">settings.h:73</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a87de387858263be565ed5a0ea076bb8b"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a87de387858263be565ed5a0ea076bb8b">lsd_slam::printObserveStatistics</a></div><div class="ttdeci">bool printObserveStatistics</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00045">settings.cpp:45</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a75f06d356632124077ea0559f44185d9"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a75f06d356632124077ea0559f44185d9">lsd_slam::DepthMap::nAvgPropagate</a></div><div class="ttdeci">float nAvgPropagate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00093">DepthMap.h:93</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ad8daea4f289e4929b82d4f6fb1632c04"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad8daea4f289e4929b82d4f6fb1632c04">lsd_slam::RunningStats::num_reg_blacklisted</a></div><div class="ttdeci">int num_reg_blacklisted</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00332">settings.h:332</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aa80854933bf3b6003d29dfc0ced115e2"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa80854933bf3b6003d29dfc0ced115e2">lsd_slam::RunningStats::num_prop_grad_decreased</a></div><div class="ttdeci">int num_prop_grad_decreased</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00320">settings.h:320</a></div></div>
<div class="ttc" id="DepthMap_8h_html"><div class="ttname"><a href="../../de/dbe/DepthMap_8h.html">DepthMap.h</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a60e43a7f852d4c2d2d32eb47c44168e1"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a60e43a7f852d4c2d2d32eb47c44168e1">lsd_slam::DepthMap::nAvgObserve</a></div><div class="ttdeci">float nAvgObserve</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00093">DepthMap.h:93</a></div></div>
<div class="ttc" id="settings_8h_html_a5c37825fa053b79d9f340b557ff04f2d"><div class="ttname"><a href="../../de/d60/settings_8h.html#a5c37825fa053b79d9f340b557ff04f2d">SAMPLE_POINT_TO_BORDER</a></div><div class="ttdeci">#define SAMPLE_POINT_TO_BORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00123">settings.h:123</a></div></div>
<div class="ttc" id="settings_8h_html_aa0f85821d3f1ea626fc9764fed6e9377"><div class="ttname"><a href="../../de/d60/settings_8h.html#aa0f85821d3f1ea626fc9764fed6e9377">SE3TRACKING_MIN_LEVEL</a></div><div class="ttdeci">#define SE3TRACKING_MIN_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00098">settings.h:98</a></div></div>
<div class="ttc" id="Frame_8h_html"><div class="ttname"><a href="../../d7/db3/Frame_8h.html">Frame.h</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_adb090708a6d800ab4755397c210583b1"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#adb090708a6d800ab4755397c210583b1">lsd_slam::RunningStats::num_observe_good_finalizing</a></div><div class="ttdeci">int num_observe_good_finalizing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00300">settings.h:300</a></div></div>
<div class="ttc" id="classSophus_1_1SE3GroupBase_html_adbfc9d61a4a27f9b5e73fa22519e61de"><div class="ttname"><a href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#adbfc9d61a4a27f9b5e73fa22519e61de">Sophus::SE3GroupBase::rotationMatrix</a></div><div class="ttdeci">const Matrix&lt; Scalar, 3, 3 &gt; rotationMatrix() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d4b/se3_8hpp_source.html#l00289">se3.hpp:289</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a2c31baa0cea975fb73ccf80d92f7a5de"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a2c31baa0cea975fb73ccf80d92f7a5de">lsd_slam::Frame::gradients</a></div><div class="ttdeci">const Eigen::Vector4f * gradients(int level=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00363">Frame.h:363</a></div></div>
<div class="ttc" id="DepthMapPixelHypothesis_8h_html"><div class="ttname"><a href="../../d9/dab/DepthMapPixelHypothesis_8h.html">DepthMapPixelHypothesis.h</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aa41869769a3d82877c0bdf425af1a384"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa41869769a3d82877c0bdf425af1a384">lsd_slam::RunningStats::num_reg_created</a></div><div class="ttdeci">int num_reg_created</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00327">settings.h:327</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_abc57c33900e6522b380d2637708e9e1f"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc57c33900e6522b380d2637708e9e1f">lsd_slam::DepthMap::msRegularize</a></div><div class="ttdeci">float msRegularize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00088">DepthMap.h:88</a></div></div>
<div class="ttc" id="classSophus_1_1Sim3GroupBase_html_a21debb906ffbeda23394fbddea8f3acd"><div class="ttname"><a href="../../d6/db5/classSophus_1_1Sim3GroupBase.html#a21debb906ffbeda23394fbddea8f3acd">Sophus::Sim3GroupBase::inverse</a></div><div class="ttdeci">const Sim3Group&lt; Scalar &gt; inverse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/sim3_8hpp_source.html#l00169">sim3.hpp:169</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aa5edbc8eae06bb767a57b1be4278189b"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa5edbc8eae06bb767a57b1be4278189b">lsd_slam::RunningStats::num_observe_blacklisted</a></div><div class="ttdeci">int num_observe_blacklisted</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00283">settings.h:283</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a8e128c8fdc004bd808c365c1ea38c9bd"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a8e128c8fdc004bd808c365c1ea38c9bd">lsd_slam::Frame::idepthVar_reAct</a></div><div class="ttdeci">const float * idepthVar_reAct()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00402">Frame.h:402</a></div></div>
<div class="ttc" id="settings_8h_html_a933a91009dd680b577b4cf13cab7761d"><div class="ttname"><a href="../../de/d60/settings_8h.html#a933a91009dd680b577b4cf13cab7761d">DIFF_FAC_OBSERVE</a></div><div class="ttdeci">#define DIFF_FAC_OBSERVE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00144">settings.h:144</a></div></div>
<div class="ttc" id="settings_8h_html_a1c49e12f8ff295dc9807fc2de2eef254"><div class="ttname"><a href="../../de/d60/settings_8h.html#a1c49e12f8ff295dc9807fc2de2eef254">VALIDITY_COUNTER_MAX</a></div><div class="ttdeci">#define VALIDITY_COUNTER_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00054">settings.h:54</a></div></div>
<div class="ttc" id="classlsd__slam_1_1IndexThreadReduce_html_ab2476f8c783eed60926b7e161cf2e0fb"><div class="ttname"><a href="../../de/d11/classlsd__slam_1_1IndexThreadReduce.html#ab2476f8c783eed60926b7e161cf2e0fb">lsd_slam::IndexThreadReduce::reduce</a></div><div class="ttdeci">void reduce(boost::function&lt; void(int, int, RunningStats *)&gt; callPerIndex, int first, int end, int stepSize=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de2/IndexThreadReduce_8h_source.html#l00068">IndexThreadReduce.h:68</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_ae7b46fd44c8b8c632d2e85c68d718508"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#ae7b46fd44c8b8c632d2e85c68d718508">lsd_slam::allowNegativeIdepths</a></div><div class="ttdeci">bool allowNegativeIdepths</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00084">settings.cpp:84</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a3328c02e1478f7959c5517d98408e9c8"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a3328c02e1478f7959c5517d98408e9c8">lsd_slam::DepthMap::nUpdate</a></div><div class="ttdeci">int nUpdate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00089">DepthMap.h:89</a></div></div>
<div class="ttc" id="settings_8h_html_adf585a408cadc4e3eb8f8fb3cebd9669"><div class="ttname"><a href="../../de/d60/settings_8h.html#adf585a408cadc4e3eb8f8fb3cebd9669">SUCC_VAR_INC_FAC</a></div><div class="ttdeci">#define SUCC_VAR_INC_FAC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00072">settings.h:72</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_abc457d3baf8123e4d2f4e29362d7ab24"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#abc457d3baf8123e4d2f4e29362d7ab24">lsd_slam::DepthMap::debugImageStereoLines</a></div><div class="ttdeci">cv::Mat debugImageStereoLines</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00078">DepthMap.h:78</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_aa94f79b5dd632a55a7069a57f45927a1"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#aa94f79b5dd632a55a7069a57f45927a1">lsd_slam::Frame::otherToThis_R_row2</a></div><div class="ttdeci">Eigen::Vector3f otherToThis_R_row2</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00191">Frame.h:191</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a77ffa8175ac0ff7e3d9a6bbe72d7fe93"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a77ffa8175ac0ff7e3d9a6bbe72d7fe93">lsd_slam::DepthMap::isValid</a></div><div class="ttdeci">bool isValid()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00071">DepthMap.h:71</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a0293920188f70a06ec1e53f6f127ff12"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a0293920188f70a06ec1e53f6f127ff12">lsd_slam::DepthMap::msUpdate</a></div><div class="ttdeci">float msUpdate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00087">DepthMap.h:87</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ad667a1e778a9814d465947e40851da1f"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad667a1e778a9814d465947e40851da1f">lsd_slam::RunningStats::num_observe_created</a></div><div class="ttdeci">int num_observe_created</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00282">settings.h:282</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a7d9ef4d92788bb6dd693d21d05bd98ed"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a7d9ef4d92788bb6dd693d21d05bd98ed">lsd_slam::RunningStats::num_observe_notfound</a></div><div class="ttdeci">int num_observe_notfound</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00296">settings.h:296</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a309c4f704b42ab2d2e9912e11c211808"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a309c4f704b42ab2d2e9912e11c211808">lsd_slam::cameraPixelNoise2</a></div><div class="ttdeci">float cameraPixelNoise2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00081">settings.cpp:81</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a7391094f28eadefcb91a647268373ea2"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a7391094f28eadefcb91a647268373ea2">lsd_slam::RunningStats::num_prop_removed_validity</a></div><div class="ttdeci">int num_prop_removed_validity</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00319">settings.h:319</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_adb19bd5898e7d6e8ceb9a826096d166e"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#adb19bd5898e7d6e8ceb9a826096d166e">lsd_slam::Frame::refPixelWasGoodNoCreate</a></div><div class="ttdeci">bool * refPixelWasGoodNoCreate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00440">Frame.h:440</a></div></div>
<div class="ttc" id="settings_8h_html_adf2d7fec5bf033328e64fdedea22e341"><div class="ttname"><a href="../../de/d60/settings_8h.html#adf2d7fec5bf033328e64fdedea22e341">MAX_VAR</a></div><div class="ttdeci">#define MAX_VAR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00074">settings.h:74</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ad030f2d1aec3b1782e3c25c2ed92de2d"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad030f2d1aec3b1782e3c25c2ed92de2d">lsd_slam::RunningStats::num_stereo_invalid_noCrossing</a></div><div class="ttdeci">int num_stereo_invalid_noCrossing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00273">settings.h:273</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a0d7c8c678e78374aa67778e5eacce1da"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a0d7c8c678e78374aa67778e5eacce1da">lsd_slam::RunningStats::num_stereo_invalid_bigErr</a></div><div class="ttdeci">int num_stereo_invalid_bigErr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00274">settings.h:274</a></div></div>
<div class="ttc" id="settings_8h_html_a11bed9afda04dc002b58e2dc27ec64fe"><div class="ttname"><a href="../../de/d60/settings_8h.html#a11bed9afda04dc002b58e2dc27ec64fe">REG_DIST_VAR</a></div><div class="ttdeci">#define REG_DIST_VAR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00139">settings.h:139</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a673740ae01dbcb72cb42cfc0f91f0521"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a673740ae01dbcb72cb42cfc0f91f0521">lsd_slam::RunningStats::num_prop_color_decreased</a></div><div class="ttdeci">int num_prop_color_decreased</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00321">settings.h:321</a></div></div>
<div class="ttc" id="classSophus_1_1SE3Group_html_a1bfd300de4529a2f6ba0ff5baecea98e"><div class="ttname"><a href="../../dd/d3d/classSophus_1_1SE3Group.html#a1bfd300de4529a2f6ba0ff5baecea98e">Sophus::SE3Group::translation</a></div><div class="ttdeci">EIGEN_STRONG_INLINE TranslationReference translation()</div><div class="ttdoc">Mutator of translation vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d4b/se3_8hpp_source.html#l00760">se3.hpp:760</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a5c4e688e7513e34dd120114104335205"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a5c4e688e7513e34dd120114104335205">lsd_slam::RunningStats::num_observe_skip_oob</a></div><div class="ttdeci">int num_observe_skip_oob</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00298">settings.h:298</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a66431a18987966493cb7796d55c0162b"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a66431a18987966493cb7796d55c0162b">lsd_slam::DepthMap::nAvgFillHoles</a></div><div class="ttdeci">float nAvgFillHoles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00093">DepthMap.h:93</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a91c90e504f46cfd163f8a43b30d40a96"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a91c90e504f46cfd163f8a43b30d40a96">lsd_slam::RunningStats::num_prop_occluded</a></div><div class="ttdeci">int num_prop_occluded</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00323">settings.h:323</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a6d38d40cd9a68d253bcb3cab2ddfa068"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">lsd_slam::Frame::id</a></div><div class="ttdeci">int id() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00295">Frame.h:295</a></div></div>
<div class="ttc" id="settings_8h_html_ab2589c427511fecd424d39d38b1cd29d"><div class="ttname"><a href="../../de/d60/settings_8h.html#ab2589c427511fecd424d39d38b1cd29d">MAX_DIFF_CONSTANT</a></div><div class="ttdeci">#define MAX_DIFF_CONSTANT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00165">settings.h:165</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a722bd8b07e962b6de142519f38405628"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a722bd8b07e962b6de142519f38405628">lsd_slam::Frame::numMappedOnThis</a></div><div class="ttdeci">int numMappedOnThis</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00199">Frame.h:199</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a299bcddaca0539b927cc0e3a6ec5739b"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a299bcddaca0539b927cc0e3a6ec5739b">lsd_slam::Frame::K_otherToThis_t</a></div><div class="ttdeci">Eigen::Vector3f K_otherToThis_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00185">Frame.h:185</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_af1a62216054ed2b6b349582e1c072724"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#af1a62216054ed2b6b349582e1c072724">lsd_slam::DepthMap::debugImageHypothesisHandling</a></div><div class="ttdeci">cv::Mat debugImageHypothesisHandling</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00076">DepthMap.h:76</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a14c9231bf2538778995c010e72a8b0f9"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a14c9231bf2538778995c010e72a8b0f9">lsd_slam::printRegularizeStatistics</a></div><div class="ttdeci">bool printRegularizeStatistics</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00047">settings.cpp:47</a></div></div>
<div class="ttc" id="settings_8h_html_a257281b7f2f932130de8d98661b1e5b6"><div class="ttname"><a href="../../de/d60/settings_8h.html#a257281b7f2f932130de8d98661b1e5b6">DIFF_FAC_PROP_MERGE</a></div><div class="ttdeci">#define DIFF_FAC_PROP_MERGE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00145">settings.h:145</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html">lsd_slam::RunningStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00259">settings.h:259</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_ad78d873de1adfd4ab3268c50b1d462c7"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#ad78d873de1adfd4ab3268c50b1d462c7">lsd_slam::Frame::idepth</a></div><div class="ttdeci">const float * idepth(int level=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00379">Frame.h:379</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a1578e8f2c0fe257d42661b782cb8e811"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a1578e8f2c0fe257d42661b782cb8e811">lsd_slam::DepthMap::nRegularize</a></div><div class="ttdeci">int nRegularize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00090">DepthMap.h:90</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_ab8fc38eab2fd508e7fca49b58787b687"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab8fc38eab2fd508e7fca49b58787b687">lsd_slam::DepthMap::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l00102">DepthMap.cpp:102</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a014d19bf6ffba0f0c0b8b684f9afb0b0"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a014d19bf6ffba0f0c0b8b684f9afb0b0">lsd_slam::Frame::height</a></div><div class="ttdeci">int height(int level=0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00305">Frame.h:305</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ad01412ac55c0834f2455e08ed2986438"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad01412ac55c0834f2455e08ed2986438">lsd_slam::RunningStats::num_prop_removed_out_of_bounds</a></div><div class="ttdeci">int num_prop_removed_out_of_bounds</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00317">settings.h:317</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_ab185dd9f3fc27093ecf093926c4a6a5e"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab185dd9f3fc27093ecf093926c4a6a5e">lsd_slam::DepthMap::msFinalize</a></div><div class="ttdeci">float msFinalize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00087">DepthMap.h:87</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_aa5422a17806f94238eb4b0a997f84d3c"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#aa5422a17806f94238eb4b0a997f84d3c">lsd_slam::Frame::K_otherToThis_R</a></div><div class="ttdeci">Eigen::Matrix3f K_otherToThis_R</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00184">Frame.h:184</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html">lsd_slam::Frame</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00041">Frame.h:41</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_adac400f4b48f3d5ea20ee4ac8ea5ad8e"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#adac400f4b48f3d5ea20ee4ac8ea5ad8e">lsd_slam::Frame::idepth_reAct</a></div><div class="ttdeci">const float * idepth_reAct()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00396">Frame.h:396</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aa7268f6ac7e48aa2f95ed259b475fad4"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aa7268f6ac7e48aa2f95ed259b475fad4">lsd_slam::RunningStats::num_observe_create_attempted</a></div><div class="ttdeci">int num_observe_create_attempted</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00313">settings.h:313</a></div></div>
<div class="ttc" id="settings_8h_html_a4a8bf201d526db90c23b6129ff94974c"><div class="ttname"><a href="../../de/d60/settings_8h.html#a4a8bf201d526db90c23b6129ff94974c">MIN_EPL_LENGTH_CROP</a></div><div class="ttdeci">#define MIN_EPL_LENGTH_CROP</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00117">settings.h:117</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ae6f37135e51264476d82c5616b1339d4"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae6f37135e51264476d82c5616b1339d4">lsd_slam::RunningStats::num_reg_total</a></div><div class="ttdeci">int num_reg_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00329">settings.h:329</a></div></div>
<div class="ttc" id="settings_8h_html_a3754aaecbdf355ecead62cc3a34fb7b9"><div class="ttname"><a href="../../de/d60/settings_8h.html#a3754aaecbdf355ecead62cc3a34fb7b9">MIN_DEPTH</a></div><div class="ttdeci">#define MIN_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00113">settings.h:113</a></div></div>
<div class="ttc" id="settings_8h_html_a905316cf8e65fc1a6ebeb313ced4cee7"><div class="ttname"><a href="../../de/d60/settings_8h.html#a905316cf8e65fc1a6ebeb313ced4cee7">MIN_DISTANCE_ERROR_STEREO</a></div><div class="ttdeci">#define MIN_DISTANCE_ERROR_STEREO</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00127">settings.h:127</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a5f7e7a10b57ff2d46296544334cd482a"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a5f7e7a10b57ff2d46296544334cd482a">lsd_slam::RunningStats::num_prop_created</a></div><div class="ttdeci">int num_prop_created</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00324">settings.h:324</a></div></div>
<div class="ttc" id="settings_8h_html_a9706e982f42399b3f4abedbf4cf9aaa1"><div class="ttname"><a href="../../de/d60/settings_8h.html#a9706e982f42399b3f4abedbf4cf9aaa1">MIN_ABS_GRAD_CREATE</a></div><div class="ttdeci">#define MIN_ABS_GRAD_CREATE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00157">settings.h:157</a></div></div>
<div class="ttc" id="settings_8h_html_a5697355de97253131b1423a04bb10c58"><div class="ttname"><a href="../../de/d60/settings_8h.html#a5697355de97253131b1423a04bb10c58">DIFF_FAC_SMOOTHING</a></div><div class="ttdeci">#define DIFF_FAC_SMOOTHING</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00143">settings.h:143</a></div></div>
<div class="ttc" id="settings_8h_html"><div class="ttname"><a href="../../de/d60/settings_8h.html">settings.h</a></div></div>
<div class="ttc" id="settings_8h_html_ab476c2aba408ab93d1b03c474b6590e7"><div class="ttname"><a href="../../de/d60/settings_8h.html#ab476c2aba408ab93d1b03c474b6590e7">VALIDITY_COUNTER_INITIAL_OBSERVE</a></div><div class="ttdeci">#define VALIDITY_COUNTER_INITIAL_OBSERVE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00059">settings.h:59</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a9306307027bbe62b973c0b138216b456"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a9306307027bbe62b973c0b138216b456">lsd_slam::Frame::image</a></div><div class="ttdeci">float * image(int level=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00357">Frame.h:357</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a80d89c896825d97dd61021ea8dc904eb"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a80d89c896825d97dd61021ea8dc904eb">lsd_slam::DepthMap::updateKeyframe</a></div><div class="ttdeci">void updateKeyframe(std::deque&lt; std::shared_ptr&lt; Frame &gt; &gt; referenceFrames)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l01072">DepthMap.cpp:1072</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_aaad7df1f66aea8294bfddd8bc929bc00"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#aaad7df1f66aea8294bfddd8bc929bc00">lsd_slam::DepthMap::addTimingSample</a></div><div class="ttdeci">void addTimingSample()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l01329">DepthMap.cpp:1329</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a9e446e7abf6fc1e988594935dad9072b"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a9e446e7abf6fc1e988594935dad9072b">lsd_slam::Frame::pose</a></div><div class="ttdeci">FramePoseStruct * pose</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00149">Frame.h:149</a></div></div>
<div class="ttc" id="settings_8h_html_acdd2c290714f61a16e55f9baf2acc303"><div class="ttname"><a href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a></div><div class="ttdeci">#define enablePrintDebugInfo</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00047">settings.h:47</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a010d3b33ee98a7e0351849b51b44f2a9"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a010d3b33ee98a7e0351849b51b44f2a9">lsd_slam::RunningStats::num_observe_inconsistent</a></div><div class="ttdeci">int num_observe_inconsistent</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00293">settings.h:293</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a65aac68c7cecdc9c125ec8926b27e867"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a65aac68c7cecdc9c125ec8926b27e867">lsd_slam::sim3FromSE3</a></div><div class="ttdeci">Sim3 sim3FromSE3(const SE3 &amp;se3, sophusType scale)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d13/SophusUtil_8h_source.html#l00053">SophusUtil.h:53</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ac2fd244f93035dd6dae9fa9fd2f0226c"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac2fd244f93035dd6dae9fa9fd2f0226c">lsd_slam::RunningStats::num_prop_merged</a></div><div class="ttdeci">int num_prop_merged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00325">settings.h:325</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_add52a76d9e4ebdb9f14408bf3e996d8c"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#add52a76d9e4ebdb9f14408bf3e996d8c">lsd_slam::DepthMap::createKeyFrame</a></div><div class="ttdeci">void createKeyFrame(Frame *new_keyframe)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l01222">DepthMap.cpp:1222</a></div></div>
<div class="ttc" id="classlsd__slam_1_1FramePoseStruct_html_acf840ddb08df60aa537c52b305430a2a"><div class="ttname"><a href="../../d9/d9e/classlsd__slam_1_1FramePoseStruct.html#acf840ddb08df60aa537c52b305430a2a">lsd_slam::FramePoseStruct::thisToParent_raw</a></div><div class="ttdeci">Sim3 thisToParent_raw</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d75/FramePoseStruct_8h_source.html#l00042">FramePoseStruct.h:42</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a9a86bedc6b58a1df8618208e00b99aa7"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a9a86bedc6b58a1df8618208e00b99aa7">lsd_slam::plotStereoImages</a></div><div class="ttdeci">bool plotStereoImages</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00067">settings.cpp:67</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ad81a61b46dc1905ef6a2be032d158b82"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad81a61b46dc1905ef6a2be032d158b82">lsd_slam::RunningStats::num_observe_trans_idle_exhausted</a></div><div class="ttdeci">int num_observe_trans_idle_exhausted</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00291">settings.h:291</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a6ab8d718a8bf6c1c85541b8948bd5248"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a6ab8d718a8bf6c1c85541b8948bd5248">lsd_slam::se3FromSim3</a></div><div class="ttdeci">SE3 se3FromSim3(const Sim3 &amp;sim3)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d13/SophusUtil_8h_source.html#l00060">SophusUtil.h:60</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_acc99c43a91d9a928885536632ed9b701"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#acc99c43a91d9a928885536632ed9b701">lsd_slam::Frame::otherToThis_R_row0</a></div><div class="ttdeci">Eigen::Vector3f otherToThis_R_row0</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00189">Frame.h:189</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_abe0ec6e93823ae0a31e73100a8b73940"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#abe0ec6e93823ae0a31e73100a8b73940">lsd_slam::Frame::hasIDepthBeenSet</a></div><div class="ttdeci">bool hasIDepthBeenSet() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00375">Frame.h:375</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ac5fe9c500f2621c4545d21d009766278"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ac5fe9c500f2621c4545d21d009766278">lsd_slam::RunningStats::num_stereo_interpPre</a></div><div class="ttdeci">int num_stereo_interpPre</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00275">settings.h:275</a></div></div>
<div class="ttc" id="settings_8h_html_a6431ecbd243f3b0cd0f63a875ea3931f"><div class="ttname"><a href="../../de/d60/settings_8h.html#a6431ecbd243f3b0cd0f63a875ea3931f">DIVISION_EPS</a></div><div class="ttdeci">#define DIVISION_EPS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00034">settings.h:34</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ae1869fd3a2b8145cb8e3cded8546b06c"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ae1869fd3a2b8145cb8e3cded8546b06c">lsd_slam::RunningStats::num_observe_skipped_small_epl_angle</a></div><div class="ttdeci">int num_observe_skipped_small_epl_angle</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00287">settings.h:287</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMapPixelHypothesis_html"><div class="ttname"><a href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html">lsd_slam::DepthMapPixelHypothesis</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/DepthMapPixelHypothesis_8h_source.html#l00037">DepthMapPixelHypothesis.h:37</a></div></div>
<div class="ttc" id="settings_8h_html_a2ad212f2f1efe71ffd14e5c3568ab0bb"><div class="ttname"><a href="../../de/d60/settings_8h.html#a2ad212f2f1efe71ffd14e5c3568ab0bb">VALIDITY_COUNTER_INC</a></div><div class="ttdeci">#define VALIDITY_COUNTER_INC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00057">settings.h:57</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_ad227bc49e8e2a12fe457a4d2eae5a858"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#ad227bc49e8e2a12fe457a4d2eae5a858">lsd_slam::RunningStats::num_prop_attempts</a></div><div class="ttdeci">int num_prop_attempts</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00322">settings.h:322</a></div></div>
<div class="ttc" id="classlsd__slam_1_1FramePoseStruct_html_ab9486b6fbedeb81e5e7d29f02f92c008"><div class="ttname"><a href="../../d9/d9e/classlsd__slam_1_1FramePoseStruct.html#ab9486b6fbedeb81e5e7d29f02f92c008">lsd_slam::FramePoseStruct::invalidateCache</a></div><div class="ttdeci">void invalidateCache()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d10/FramePoseStruct_8cpp_source.html#l00080">FramePoseStruct.cpp:80</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_aa2135ac4d1e7a39b3033d880441f7834"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#aa2135ac4d1e7a39b3033d880441f7834">lsd_slam::DepthMap::DepthMap</a></div><div class="ttdeci">EIGEN_MAKE_ALIGNED_OPERATOR_NEW DepthMap(int w, int h, const Eigen::Matrix3f &amp;K)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l00041">DepthMap.cpp:41</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_ac4fa06d232e9964882dd19cc44a31c3e"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#ac4fa06d232e9964882dd19cc44a31c3e">lsd_slam::DepthMap::invalidate</a></div><div class="ttdeci">void invalidate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l01215">DepthMap.cpp:1215</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_aef0161396bb13077d05198f0f5514e4c"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#aef0161396bb13077d05198f0f5514e4c">lsd_slam::DepthMap::initializeFromGTDepth</a></div><div class="ttdeci">void initializeFromGTDepth(Frame *new_frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l00965">DepthMap.cpp:965</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a568f496710f976510fcd8d547f3bfc9d"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a568f496710f976510fcd8d547f3bfc9d">lsd_slam::RunningStats::num_observe_skipped_small_epl</a></div><div class="ttdeci">int num_observe_skipped_small_epl</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00285">settings.h:285</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a18830417f9d1cdd547145fdd3d8de297"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a18830417f9d1cdd547145fdd3d8de297">lsd_slam::Frame::numMappedOnThisTotal</a></div><div class="ttdeci">int numMappedOnThisTotal</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00200">Frame.h:200</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMapPixelHypothesis_html_a27273a9266af3c4fb91147febeae020a"><div class="ttname"><a href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#a27273a9266af3c4fb91147febeae020a">lsd_slam::DepthMapPixelHypothesis::blacklisted</a></div><div class="ttdeci">int blacklisted</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/DepthMapPixelHypothesis_8h_source.html#l00046">DepthMapPixelHypothesis.h:46</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_aa3a7bb8c808e02f5d7bbfc86107d78dd"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#aa3a7bb8c808e02f5d7bbfc86107d78dd">lsd_slam::runningStats</a></div><div class="ttdeci">RunningStats runningStats</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00029">settings.cpp:29</a></div></div>
<div class="ttc" id="settings_8h_html_a2760610777badf27c5e434c5f2a9c2fb"><div class="ttname"><a href="../../de/d60/settings_8h.html#a2760610777badf27c5e434c5f2a9c2fb">MAX_EPL_LENGTH_CROP</a></div><div class="ttdeci">#define MAX_EPL_LENGTH_CROP</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00116">settings.h:116</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a85ceddca691c6b669c84d3d0d274fc1f"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a85ceddca691c6b669c84d3d0d274fc1f">lsd_slam::RunningStats::num_observe_addSkip</a></div><div class="ttdeci">int num_observe_addSkip</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00306">settings.h:306</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a48a7fceaa3fdbb271778f0648f0bc115"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a48a7fceaa3fdbb271778f0648f0bc115">lsd_slam::DepthMap::msSetDepth</a></div><div class="ttdeci">float msSetDepth</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00088">DepthMap.h:88</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a30565f7b2f6fddff49694a05ddac983d"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a30565f7b2f6fddff49694a05ddac983d">lsd_slam::DepthMap::debugPlotDepthMap</a></div><div class="ttdeci">int debugPlotDepthMap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l01400">DepthMap.cpp:1400</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a65b604326ce1a5e9472715dbe2c8ed6f"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a65b604326ce1a5e9472715dbe2c8ed6f">lsd_slam::DepthMap::nCreate</a></div><div class="ttdeci">int nCreate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00089">DepthMap.h:89</a></div></div>
<div class="ttc" id="globalFuncs_8h_html"><div class="ttname"><a href="../../d7/dd7/globalFuncs_8h.html">globalFuncs.h</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a79d83f1d1911274ab55d95ebf5e3dab5"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a79d83f1d1911274ab55d95ebf5e3dab5">lsd_slam::DepthMap::setFromExistingKF</a></div><div class="ttdeci">void setFromExistingKF(Frame *kf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5e/DepthMap_8cpp_source.html#l00920">DepthMap.cpp:920</a></div></div>
<div class="ttc" id="settings_8h_html_ae477fa0a9b2f7606922f4b01cc9f016b"><div class="ttname"><a href="../../de/d60/settings_8h.html#ae477fa0a9b2f7606922f4b01cc9f016b">MAX_DIFF_GRAD_MULT</a></div><div class="ttdeci">#define MAX_DIFF_GRAD_MULT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00166">settings.h:166</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_ab39ca230ecaf2395bcf801868a67da3f"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#ab39ca230ecaf2395bcf801868a67da3f">lsd_slam::DepthMap::nAvgFinalize</a></div><div class="ttdeci">float nAvgFinalize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00092">DepthMap.h:92</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a7477c29680584827e22336df0604ba9d"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a7477c29680584827e22336df0604ba9d">lsd_slam::DepthMap::nPropagate</a></div><div class="ttdeci">int nPropagate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00090">DepthMap.h:90</a></div></div>
<div class="ttc" id="KeyFrameGraph_8h_html"><div class="ttname"><a href="../../dc/d3b/KeyFrameGraph_8h.html">KeyFrameGraph.h</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_ab210d32506887e44c440c68b25568ab3"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#ab210d32506887e44c440c68b25568ab3">lsd_slam::getInterpolatedElement</a></div><div class="ttdeci">float getInterpolatedElement(const float *const mat, const float x, const float y, const int width)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/globalFuncs_8h_source.html#l00043">globalFuncs.h:43</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a06395761fbe5b73f2e2cd43095cdbde1"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a06395761fbe5b73f2e2cd43095cdbde1">lsd_slam::DepthMap::nSetDepth</a></div><div class="ttdeci">int nSetDepth</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00090">DepthMap.h:90</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a3034e34781a1b051050a29303942c1f1"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a3034e34781a1b051050a29303942c1f1">lsd_slam::printFillHolesStatistics</a></div><div class="ttdeci">bool printFillHolesStatistics</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00044">settings.cpp:44</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a49deac8de9b3dedea20265d949303db8"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a49deac8de9b3dedea20265d949303db8">lsd_slam::RunningStats::num_observe_notfound_finalizing2</a></div><div class="ttdeci">int num_observe_notfound_finalizing2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00294">settings.h:294</a></div></div>
<div class="ttc" id="settings_8h_html_a38c58845d2acabed5449cf3532734df0"><div class="ttname"><a href="../../de/d60/settings_8h.html#a38c58845d2acabed5449cf3532734df0">MIN_ABS_GRAD_DECREASE</a></div><div class="ttdeci">#define MIN_ABS_GRAD_DECREASE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00158">settings.h:158</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_aa869fc645781090678dc61399ef26f73"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#aa869fc645781090678dc61399ef26f73">lsd_slam::Frame::setDepth</a></div><div class="ttdeci">void setDepth(const DepthMapPixelHypothesis *newDepth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de0/Frame_8cpp_source.html#l00199">Frame.cpp:199</a></div></div>
<div class="ttc" id="classSophus_1_1SE3Group_html"><div class="ttname"><a href="../../dd/d3d/classSophus_1_1SE3Group.html">Sophus::SE3Group</a></div><div class="ttdoc">SE3 default type - Constructors and default storage for SE3 Type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d4b/se3_8hpp_source.html#l00034">se3.hpp:34</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a51cfb8cc35140eee3283021d97496db6"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a51cfb8cc35140eee3283021d97496db6">lsd_slam::Frame::validity_reAct</a></div><div class="ttdeci">const unsigned char * validity_reAct()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00390">Frame.h:390</a></div></div>
<div class="ttc" id="settings_8h_html_a06c0f508be43bd32e10f19a3173172e1"><div class="ttname"><a href="../../de/d60/settings_8h.html#a06c0f508be43bd32e10f19a3173172e1">STEREO_EPL_VAR_FAC</a></div><div class="ttdeci">#define STEREO_EPL_VAR_FAC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00130">settings.h:130</a></div></div>
<div class="ttc" id="settings_8h_html_a077ca61b893315c7122d02805edb897e"><div class="ttname"><a href="../../de/d60/settings_8h.html#a077ca61b893315c7122d02805edb897e">MAX_ERROR_STEREO</a></div><div class="ttdeci">#define MAX_ERROR_STEREO</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00126">settings.h:126</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_aedf9a1f1a22813d2fde22132039a6600"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#aedf9a1f1a22813d2fde22132039a6600">lsd_slam::RunningStats::num_stereo_invalid_twoCrossing</a></div><div class="ttdeci">int num_stereo_invalid_twoCrossing</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00272">settings.h:272</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_ac60ac357b2988ee6ae78cc0ea9030d77"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#ac60ac357b2988ee6ae78cc0ea9030d77">lsd_slam::Frame::otherToThis_t</a></div><div class="ttdeci">Eigen::Vector3f otherToThis_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00186">Frame.h:186</a></div></div>
<div class="ttc" id="namespacelsd__slam_1_1Util_html_a0aefaadcc7a2728f8248cacce2cc352a"><div class="ttname"><a href="../../d8/da0/namespacelsd__slam_1_1Util.html#a0aefaadcc7a2728f8248cacce2cc352a">lsd_slam::Util::displayImage</a></div><div class="ttdeci">void displayImage(const char *windowName, const cv::Mat &amp;image, bool autoSize=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df3/ImageDisplay__OpenCV_8cpp_source.html#l00086">ImageDisplay_OpenCV.cpp:86</a></div></div>
<div class="ttc" id="classlsd__slam_1_1RunningStats_html_a461560cbd64d526a1248d78c1def44f2"><div class="ttname"><a href="../../dd/deb/classlsd__slam_1_1RunningStats.html#a461560cbd64d526a1248d78c1def44f2">lsd_slam::RunningStats::num_stereo_interpNone</a></div><div class="ttdeci">int num_stereo_interpNone</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00277">settings.h:277</a></div></div>
<div class="ttc" id="settings_8h_html_a3d69334efe3a6398245cf4f995e87262"><div class="ttname"><a href="../../de/d60/settings_8h.html#a3d69334efe3a6398245cf4f995e87262">VAL_SUM_MIN_FOR_KEEP</a></div><div class="ttdeci">#define VAL_SUM_MIN_FOR_KEEP</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00063">settings.h:63</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a83e8ffca4304e073cb421de05007f15d"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a83e8ffca4304e073cb421de05007f15d">lsd_slam::DepthMap::threadReducer</a></div><div class="ttdeci">IndexThreadReduce threadReducer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00098">DepthMap.h:98</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMap_html_a23c23f50eb70b90fd4ec83a7cc056cd9"><div class="ttname"><a href="../../db/dea/classlsd__slam_1_1DepthMap.html#a23c23f50eb70b90fd4ec83a7cc056cd9">lsd_slam::DepthMap::lastHzUpdate</a></div><div class="ttdeci">struct timeval lastHzUpdate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbe/DepthMap_8h_source.html#l00091">DepthMap.h:91</a></div></div>
<div class="ttc" id="settings_8h_html_a1e9db080b35f8245282a5531065d5635"><div class="ttname"><a href="../../de/d60/settings_8h.html#a1e9db080b35f8245282a5531065d5635">UNZERO</a></div><div class="ttdeci">#define UNZERO(val)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00035">settings.h:35</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a18af125438f137d8990887fa5b364424"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a18af125438f137d8990887fa5b364424">lsd_slam::printLineStereoFails</a></div><div class="ttdeci">bool printLineStereoFails</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00049">settings.cpp:49</a></div></div>
<div class="ttc" id="classlsd__slam_1_1DepthMapPixelHypothesis_html_aba28a1bf8203d9e0e323b9015d4ac425"><div class="ttname"><a href="../../d9/d02/classlsd__slam_1_1DepthMapPixelHypothesis.html#aba28a1bf8203d9e0e323b9015d4ac425">lsd_slam::DepthMapPixelHypothesis::isValid</a></div><div class="ttdeci">bool isValid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/DepthMapPixelHypothesis_8h_source.html#l00043">DepthMapPixelHypothesis.h:43</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 29 2016 14:56:56 for LSD SLAM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
