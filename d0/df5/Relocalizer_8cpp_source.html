<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LSD SLAM: src/Tracking/Relocalizer.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LSD SLAM
   &#160;<span id="projectnumber">1.00</span>
   </div>
   <div id="projectbrief">A Direct monocular SLAM method</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_ab5d75ad8c66551d10c4965d9af7e3ec.html">src</a></li><li class="navelem"><a class="el" href="../../dir_db2588f7d7371108dad9c5300c0d0c3e.html">Tracking</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Relocalizer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d0/df5/Relocalizer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d5d/Relocalizer_8h.html">Relocalizer.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/db3/Frame_8h.html">DataStructures/Frame.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/de5/SE3Tracker_8h.html">Tracking/SE3Tracker.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d3f/ImageDisplay_8h.html">IOWrapper/ImageDisplay.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span>lsd_slam</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#acd060c9dc0f2c1ae667f517a1f3e7947">   30</a></span>&#160;<a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#acd060c9dc0f2c1ae667f517a1f3e7947">Relocalizer::Relocalizer</a>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, Eigen::Matrix3f K)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="../../de/d60/settings_8h.html#a3ffc6f50c9be9c3ab5433bcac5b73316">RELOCALIZE_THREADS</a>;i++)</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        running[i] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    this-&gt;w = w;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    this-&gt;h = h;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    this-&gt;K = K;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    KFForReloc.clear();</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    nextRelocIDX = maxRelocIDX = 0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    continueRunning = <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a771108ba996cd0bc8392e256b4060db3">isRunning</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    hasResult = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    resultKF = 0;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    resultFrameID = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    resultFrameToKeyframe = <a class="code" href="../../d2/d13/SophusUtil_8h.html#ac41639d304c40e582177499dd90837fd">SE3</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#af3d7f56079603b26ceb61560d5e28f44">   49</a></span>&#160;<a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#af3d7f56079603b26ceb61560d5e28f44">Relocalizer::~Relocalizer</a>()</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a74488e97a8183f671a5e0b34d81e9b88">stop</a>();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a74488e97a8183f671a5e0b34d81e9b88">   53</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a74488e97a8183f671a5e0b34d81e9b88">Relocalizer::stop</a>()</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    continueRunning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    exMutex.lock();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    newCurrentFrameSignal.notify_all();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    exMutex.unlock();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="../../de/d60/settings_8h.html#a3ffc6f50c9be9c3ab5433bcac5b73316">RELOCALIZE_THREADS</a>;i++)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        relocThreads[i].join();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        running[i] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a771108ba996cd0bc8392e256b4060db3">isRunning</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    KFForReloc.clear();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    CurrentRelocFrame.reset();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a55f025b2393347238dd7e039c04cd55f">   72</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a55f025b2393347238dd7e039c04cd55f">Relocalizer::updateCurrentFrame</a>(std::shared_ptr&lt;Frame&gt; currentFrame)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    boost::unique_lock&lt;boost::mutex&gt; lock(exMutex);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span>(hasResult) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    this-&gt;CurrentRelocFrame = currentFrame;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//  int doneLast = KFForReloc.size() - (maxRelocIDX-nextRelocIDX);</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    maxRelocIDX = nextRelocIDX + KFForReloc.size();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    newCurrentFrameSignal.notify_all();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    lock.unlock();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">//  printf(&quot;tried last on %d. set new current frame %d. trying %d to %d!\n&quot;,</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//          doneLast,</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//          currentFrame-&gt;id(), nextRelocIDX, maxRelocIDX);</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dca/namespacelsd__slam.html#ad0105fd77dc9f98855a20c81b19b775f">displayDepthMap</a>)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="../../d8/da0/namespacelsd__slam_1_1Util.html#a0aefaadcc7a2728f8248cacce2cc352a">Util::displayImage</a>( <span class="stringliteral">&quot;DebugWindow DEPTH&quot;</span>, cv::Mat(currentFrame-&gt;height(), currentFrame-&gt;width(), CV_32F, currentFrame-&gt;image())*(1/255.0f), <a class="code" href="../../db/dfa/LSDParamsConfig_8dox.html#a63e931eeab9acee67623569247290b53">false</a> );</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">int</span> pressedKey = <a class="code" href="../../d8/da0/namespacelsd__slam_1_1Util.html#aca4fa361644158d98d3f77cae377e883">Util::waitKey</a>(1);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab7c7b569b42c99eb8312be5a0653df0b">handleKey</a>(pressedKey);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#ae4dd8af1a09287333b2f7a22ac5ef99d">   94</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#ae4dd8af1a09287333b2f7a22ac5ef99d">Relocalizer::start</a>(std::vector&lt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>*, Eigen::aligned_allocator&lt;lsd_slam::Frame*&gt; &gt; &amp;allKeyframesList)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// make KFForReloc List</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    KFForReloc.clear();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0;k &lt; allKeyframesList.size(); k++)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">// insert</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        KFForReloc.push_back(allKeyframesList[k]);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="comment">// swap with a random element</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordtype">int</span> ridx = rand()%(KFForReloc.size());</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* tmp = KFForReloc.back();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        KFForReloc.back() = KFForReloc[ridx];</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        KFForReloc[ridx] = tmp;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    nextRelocIDX=0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    maxRelocIDX=KFForReloc.size();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    hasResult = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    continueRunning = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a771108ba996cd0bc8392e256b4060db3">isRunning</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// start threads</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="../../de/d60/settings_8h.html#a3ffc6f50c9be9c3ab5433bcac5b73316">RELOCALIZE_THREADS</a>;i++)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        relocThreads[i] = boost::thread(&amp;Relocalizer::threadLoop, <span class="keyword">this</span>, i);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        running[i] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a3c06e60e0788f2203160d46825745492">  124</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a3c06e60e0788f2203160d46825745492">Relocalizer::waitResult</a>(<span class="keywordtype">int</span> milliseconds)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    boost::unique_lock&lt;boost::mutex&gt; lock(exMutex);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span>(hasResult) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    resultReadySignal.timed_wait(lock, boost::posix_time::milliseconds(milliseconds));</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">return</span> hasResult;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a2c50009413c4f6d2d8de3f9e8c9c7272">  131</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a2c50009413c4f6d2d8de3f9e8c9c7272">Relocalizer::getResult</a>(<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* &amp;out_keyframe, std::shared_ptr&lt;Frame&gt; &amp;frame, <span class="keywordtype">int</span> &amp;out_successfulFrameID, <a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html">SE3</a> &amp;out_frameToKeyframe)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    boost::unique_lock&lt;boost::mutex&gt; lock(exMutex);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span>(hasResult)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        out_keyframe = resultKF;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        out_successfulFrameID = resultFrameID;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        out_frameToKeyframe = resultFrameToKeyframe;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        frame = resultRelocFrame;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        out_keyframe = 0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        out_successfulFrameID = -1;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        out_frameToKeyframe = <a class="code" href="../../d2/d13/SophusUtil_8h.html#ac41639d304c40e582177499dd90837fd">SE3</a>();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        frame.reset();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keywordtype">void</span> Relocalizer::threadLoop(<span class="keywordtype">int</span> idx)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="../../dc/dca/namespacelsd__slam.html#af9ef902c8e6cae549e90cc06143765da">multiThreading</a> &amp;&amp; idx != 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html">SE3Tracker</a>* tracker = <span class="keyword">new</span> <a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html">SE3Tracker</a>(w,h,K);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    boost::unique_lock&lt;boost::mutex&gt; lock(exMutex);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">while</span>(continueRunning)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// if got something: do it (unlock in the meantime)</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span>(nextRelocIDX &lt; maxRelocIDX &amp;&amp; CurrentRelocFrame)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* todo = KFForReloc[nextRelocIDX%KFForReloc.size()];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            nextRelocIDX++;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span>(todo-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac0beb1665cd6caecfef8f6103203c147">neighbors</a>.size() &lt;= 2) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            std::shared_ptr&lt;Frame&gt; myRelocFrame = CurrentRelocFrame;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            lock.unlock();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="comment">// initial Alignment</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html">SE3</a> todoToFrame = tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#a01873383b027fb673d8bada325412d8e">trackFrameOnPermaref</a>(todo, myRelocFrame.get(), <a class="code" href="../../d2/d13/SophusUtil_8h.html#ac41639d304c40e582177499dd90837fd">SE3</a>());</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="comment">// try neighbours</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordtype">float</span> todoGoodVal = tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#abafd83f1a3ebd3cde778214f8eefa88a">pointUsage</a> * tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#aa5c3cad4c11940fc4f133bf9e20eae88">lastGoodCount</a> / (tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#aa5c3cad4c11940fc4f133bf9e20eae88">lastGoodCount</a>+tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#a95114010e6904ac3f266337a29c1a677">lastBadCount</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span>(todoGoodVal &gt; <a class="code" href="../../dc/dca/namespacelsd__slam.html#acf3dc1f9ec3f9f5e03c54c750afde3c5">relocalizationTH</a>)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordtype">int</span> numGoodNeighbours = 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordtype">int</span> numBadNeighbours = 0;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordtype">float</span> bestNeightbourGoodVal = todoGoodVal;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <span class="keywordtype">float</span> bestNeighbourUsage = tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#abafd83f1a3ebd3cde778214f8eefa88a">pointUsage</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* bestKF = todo;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html">SE3</a> bestKFToFrame = todoToFrame;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="keywordflow">for</span>(<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html">Frame</a>* nkf : todo-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#ac0beb1665cd6caecfef8f6103203c147">neighbors</a>)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html">SE3</a> nkfToFrame_init = <a class="code" href="../../dc/dca/namespacelsd__slam.html#a6ab8d718a8bf6c1c85541b8948bd5248">se3FromSim3</a>((nkf-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0f4a92d51569c280e4b37acbf562ea47">getScaledCamToWorld</a>().<a class="code" href="../../d6/db5/classSophus_1_1Sim3GroupBase.html#a21debb906ffbeda23394fbddea8f3acd">inverse</a>() * todo-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a0f4a92d51569c280e4b37acbf562ea47">getScaledCamToWorld</a>() * <a class="code" href="../../dc/dca/namespacelsd__slam.html#a65aac68c7cecdc9c125ec8926b27e867">sim3FromSE3</a>(todoToFrame.<a class="code" href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">inverse</a>(), 1))).inverse();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <a class="code" href="../../dd/d3d/classSophus_1_1SE3Group.html">SE3</a> nkfToFrame = tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#a01873383b027fb673d8bada325412d8e">trackFrameOnPermaref</a>(nkf, myRelocFrame.get(), nkfToFrame_init);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <span class="keywordtype">float</span> goodVal = tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#abafd83f1a3ebd3cde778214f8eefa88a">pointUsage</a> * tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#aa5c3cad4c11940fc4f133bf9e20eae88">lastGoodCount</a> / (tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#aa5c3cad4c11940fc4f133bf9e20eae88">lastGoodCount</a>+tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#a95114010e6904ac3f266337a29c1a677">lastBadCount</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <span class="keywordflow">if</span>(goodVal &gt; <a class="code" href="../../dc/dca/namespacelsd__slam.html#acf3dc1f9ec3f9f5e03c54c750afde3c5">relocalizationTH</a>*0.8 &amp;&amp; (nkfToFrame * nkfToFrame_init.<a class="code" href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">inverse</a>()).log().norm() &lt; 0.1)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        numGoodNeighbours++;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        numBadNeighbours++;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <span class="keywordflow">if</span>(goodVal &gt; bestNeightbourGoodVal)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        bestNeightbourGoodVal = goodVal;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        bestKF = nkf;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        bestKFToFrame = nkfToFrame;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        bestNeighbourUsage = tracker-&gt;<a class="code" href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#abafd83f1a3ebd3cde778214f8eefa88a">pointUsage</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="keywordflow">if</span>(numGoodNeighbours &gt; numBadNeighbours || numGoodNeighbours &gt;= 5)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab048b8b0b27d89cf72b5a2051564b28d">printRelocalizationInfo</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        printf(<span class="stringliteral">&quot;RELOCALIZED! frame %d on %d (bestNeighbour %d): good %2.1f%%, usage %2.1f%%, GoodNeighbours %d / %d\n&quot;</span>,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                myRelocFrame-&gt;id(), todo-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(), bestKF-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(),</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                100*bestNeightbourGoodVal, 100*bestNeighbourUsage,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                numGoodNeighbours, numGoodNeighbours+numBadNeighbours);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    <span class="comment">// set everything to stop!</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    continueRunning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    lock.lock();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    resultRelocFrame = myRelocFrame;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    resultFrameID = myRelocFrame-&gt;id();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    resultKF = bestKF;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    resultFrameToKeyframe = bestKFToFrame.<a class="code" href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">inverse</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    resultReadySignal.notify_all();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    hasResult = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    lock.unlock();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a> &amp;&amp; <a class="code" href="../../dc/dca/namespacelsd__slam.html#ab048b8b0b27d89cf72b5a2051564b28d">printRelocalizationInfo</a>)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                        printf(<span class="stringliteral">&quot;FAILED RELOCALIZE! frame %d on %d (bestNeighbour %d): good %2.1f%%, usage %2.1f%%, GoodNeighbours %d / %d\n&quot;</span>,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                myRelocFrame-&gt;id(), todo-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(), bestKF-&gt;<a class="code" href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">id</a>(),</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                100*bestNeightbourGoodVal, 100*bestNeighbourUsage,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                numGoodNeighbours, numGoodNeighbours+numBadNeighbours);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            lock.lock();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            newCurrentFrameSignal.wait(lock);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">delete</span> tracker;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_a74488e97a8183f671a5e0b34d81e9b88"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a74488e97a8183f671a5e0b34d81e9b88">lsd_slam::Relocalizer::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df5/Relocalizer_8cpp_source.html#l00053">Relocalizer.cpp:53</a></div></div>
<div class="ttc" id="namespacelsd__slam_1_1Util_html_aca4fa361644158d98d3f77cae377e883"><div class="ttname"><a href="../../d8/da0/namespacelsd__slam_1_1Util.html#aca4fa361644158d98d3f77cae377e883">lsd_slam::Util::waitKey</a></div><div class="ttdeci">int waitKey(int milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df3/ImageDisplay__OpenCV_8cpp_source.html#l00117">ImageDisplay_OpenCV.cpp:117</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_a3c06e60e0788f2203160d46825745492"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a3c06e60e0788f2203160d46825745492">lsd_slam::Relocalizer::waitResult</a></div><div class="ttdeci">bool waitResult(int milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df5/Relocalizer_8cpp_source.html#l00124">Relocalizer.cpp:124</a></div></div>
<div class="ttc" id="classlsd__slam_1_1SE3Tracker_html_aa5c3cad4c11940fc4f133bf9e20eae88"><div class="ttname"><a href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#aa5c3cad4c11940fc4f133bf9e20eae88">lsd_slam::SE3Tracker::lastGoodCount</a></div><div class="ttdeci">float lastGoodCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de5/SE3Tracker_8h_source.html#l00083">SE3Tracker.h:83</a></div></div>
<div class="ttc" id="classlsd__slam_1_1SE3Tracker_html_a95114010e6904ac3f266337a29c1a677"><div class="ttname"><a href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#a95114010e6904ac3f266337a29c1a677">lsd_slam::SE3Tracker::lastBadCount</a></div><div class="ttdeci">float lastBadCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de5/SE3Tracker_8h_source.html#l00085">SE3Tracker.h:85</a></div></div>
<div class="ttc" id="classSophus_1_1SE3GroupBase_html_a1b47e7c7329fecdc289f95094248ccfe"><div class="ttname"><a href="../../d0/d8c/classSophus_1_1SE3GroupBase.html#a1b47e7c7329fecdc289f95094248ccfe">Sophus::SE3GroupBase::inverse</a></div><div class="ttdeci">const SE3Group&lt; Scalar &gt; inverse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d4b/se3_8hpp_source.html#l00169">se3.hpp:169</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_af9ef902c8e6cae549e90cc06143765da"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#af9ef902c8e6cae549e90cc06143765da">lsd_slam::multiThreading</a></div><div class="ttdeci">bool multiThreading</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00087">settings.cpp:87</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a0f4a92d51569c280e4b37acbf562ea47"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a0f4a92d51569c280e4b37acbf562ea47">lsd_slam::Frame::getScaledCamToWorld</a></div><div class="ttdeci">Sim3 getScaledCamToWorld(int num=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00150">Frame.h:150</a></div></div>
<div class="ttc" id="classlsd__slam_1_1SE3Tracker_html_abafd83f1a3ebd3cde778214f8eefa88a"><div class="ttname"><a href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#abafd83f1a3ebd3cde778214f8eefa88a">lsd_slam::SE3Tracker::pointUsage</a></div><div class="ttdeci">float pointUsage</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de5/SE3Tracker_8h_source.html#l00082">SE3Tracker.h:82</a></div></div>
<div class="ttc" id="classlsd__slam_1_1SE3Tracker_html"><div class="ttname"><a href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html">lsd_slam::SE3Tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de5/SE3Tracker_8h_source.html#l00036">SE3Tracker.h:36</a></div></div>
<div class="ttc" id="SE3Tracker_8h_html"><div class="ttname"><a href="../../d6/de5/SE3Tracker_8h.html">SE3Tracker.h</a></div></div>
<div class="ttc" id="ImageDisplay_8h_html"><div class="ttname"><a href="../../d8/d3f/ImageDisplay_8h.html">ImageDisplay.h</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_ae4dd8af1a09287333b2f7a22ac5ef99d"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#ae4dd8af1a09287333b2f7a22ac5ef99d">lsd_slam::Relocalizer::start</a></div><div class="ttdeci">void start(std::vector&lt; Frame *, Eigen::aligned_allocator&lt; lsd_slam::Frame * &gt; &gt; &amp;allKeyframesList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df5/Relocalizer_8cpp_source.html#l00094">Relocalizer.cpp:94</a></div></div>
<div class="ttc" id="Relocalizer_8h_html"><div class="ttname"><a href="../../df/d5d/Relocalizer_8h.html">Relocalizer.h</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_ad0105fd77dc9f98855a20c81b19b775f"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#ad0105fd77dc9f98855a20c81b19b775f">lsd_slam::displayDepthMap</a></div><div class="ttdeci">bool displayDepthMap</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00038">settings.cpp:38</a></div></div>
<div class="ttc" id="Frame_8h_html"><div class="ttname"><a href="../../d7/db3/Frame_8h.html">Frame.h</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_ac0beb1665cd6caecfef8f6103203c147"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#ac0beb1665cd6caecfef8f6103203c147">lsd_slam::Frame::neighbors</a></div><div class="ttdeci">std::unordered_set&lt; Frame *, std::hash&lt; Frame * &gt;, std::equal_to&lt; Frame * &gt;, Eigen::aligned_allocator&lt; Frame * &gt; &gt; neighbors</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00160">Frame.h:160</a></div></div>
<div class="ttc" id="classSophus_1_1Sim3GroupBase_html_a21debb906ffbeda23394fbddea8f3acd"><div class="ttname"><a href="../../d6/db5/classSophus_1_1Sim3GroupBase.html#a21debb906ffbeda23394fbddea8f3acd">Sophus::Sim3GroupBase::inverse</a></div><div class="ttdeci">const Sim3Group&lt; Scalar &gt; inverse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/sim3_8hpp_source.html#l00169">sim3.hpp:169</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_a771108ba996cd0bc8392e256b4060db3"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a771108ba996cd0bc8392e256b4060db3">lsd_slam::Relocalizer::isRunning</a></div><div class="ttdeci">bool isRunning</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5d/Relocalizer_8h_source.html#l00048">Relocalizer.h:48</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_a2c50009413c4f6d2d8de3f9e8c9c7272"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a2c50009413c4f6d2d8de3f9e8c9c7272">lsd_slam::Relocalizer::getResult</a></div><div class="ttdeci">void getResult(Frame *&amp;out_keyframe, std::shared_ptr&lt; Frame &gt; &amp;frame, int &amp;out_successfulFrameID, SE3 &amp;out_frameToKeyframe)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df5/Relocalizer_8cpp_source.html#l00131">Relocalizer.cpp:131</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html_a6d38d40cd9a68d253bcb3cab2ddfa068"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html#a6d38d40cd9a68d253bcb3cab2ddfa068">lsd_slam::Frame::id</a></div><div class="ttdeci">int id() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00295">Frame.h:295</a></div></div>
<div class="ttc" id="SophusUtil_8h_html_ac41639d304c40e582177499dd90837fd"><div class="ttname"><a href="../../d2/d13/SophusUtil_8h.html#ac41639d304c40e582177499dd90837fd">SE3</a></div><div class="ttdeci">Sophus::SE3d SE3</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d13/SophusUtil_8h_source.html#l00042">SophusUtil.h:42</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_a55f025b2393347238dd7e039c04cd55f"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#a55f025b2393347238dd7e039c04cd55f">lsd_slam::Relocalizer::updateCurrentFrame</a></div><div class="ttdeci">void updateCurrentFrame(std::shared_ptr&lt; Frame &gt; currentFrame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df5/Relocalizer_8cpp_source.html#l00072">Relocalizer.cpp:72</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_ab7c7b569b42c99eb8312be5a0653df0b"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#ab7c7b569b42c99eb8312be5a0653df0b">lsd_slam::handleKey</a></div><div class="ttdeci">void handleKey(char k)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00120">settings.cpp:120</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Frame_html"><div class="ttname"><a href="../../dd/d08/classlsd__slam_1_1Frame.html">lsd_slam::Frame</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/Frame_8h_source.html#l00041">Frame.h:41</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_ab048b8b0b27d89cf72b5a2051564b28d"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#ab048b8b0b27d89cf72b5a2051564b28d">lsd_slam::printRelocalizationInfo</a></div><div class="ttdeci">bool printRelocalizationInfo</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00059">settings.cpp:59</a></div></div>
<div class="ttc" id="LSDParamsConfig_8dox_html_a63e931eeab9acee67623569247290b53"><div class="ttname"><a href="../../db/dfa/LSDParamsConfig_8dox.html#a63e931eeab9acee67623569247290b53">false</a></div><div class="ttdeci">subsubsection parameters ROS parameters Reads and maintains the following parameters on the ROS server b if your camera has large image Decrease if you have low image noise and want to also exploit small gradients to also account for noise originating from discretization linear interpolation depending on the Overlap to the current Keyframe Larger more Keyframes depending on the Distance to the current Keyframe Larger more Keyframes re activate it instead of creating a new one If false</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfa/LSDParamsConfig_8dox_source.html#l00005">LSDParamsConfig.dox:5</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_acd060c9dc0f2c1ae667f517a1f3e7947"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#acd060c9dc0f2c1ae667f517a1f3e7947">lsd_slam::Relocalizer::Relocalizer</a></div><div class="ttdeci">Relocalizer(int w, int h, Eigen::Matrix3f K)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df5/Relocalizer_8cpp_source.html#l00030">Relocalizer.cpp:30</a></div></div>
<div class="ttc" id="settings_8h_html_acdd2c290714f61a16e55f9baf2acc303"><div class="ttname"><a href="../../de/d60/settings_8h.html#acdd2c290714f61a16e55f9baf2acc303">enablePrintDebugInfo</a></div><div class="ttdeci">#define enablePrintDebugInfo</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00047">settings.h:47</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a65aac68c7cecdc9c125ec8926b27e867"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a65aac68c7cecdc9c125ec8926b27e867">lsd_slam::sim3FromSE3</a></div><div class="ttdeci">Sim3 sim3FromSE3(const SE3 &amp;se3, sophusType scale)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d13/SophusUtil_8h_source.html#l00053">SophusUtil.h:53</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_a6ab8d718a8bf6c1c85541b8948bd5248"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#a6ab8d718a8bf6c1c85541b8948bd5248">lsd_slam::se3FromSim3</a></div><div class="ttdeci">SE3 se3FromSim3(const Sim3 &amp;sim3)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d13/SophusUtil_8h_source.html#l00060">SophusUtil.h:60</a></div></div>
<div class="ttc" id="classlsd__slam_1_1SE3Tracker_html_a01873383b027fb673d8bada325412d8e"><div class="ttname"><a href="../../de/d8b/classlsd__slam_1_1SE3Tracker.html#a01873383b027fb673d8bada325412d8e">lsd_slam::SE3Tracker::trackFrameOnPermaref</a></div><div class="ttdeci">SE3 trackFrameOnPermaref(Frame *reference, Frame *frame, SE3 referenceToFrame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d91/SE3Tracker_8cpp_source.html#l00162">SE3Tracker.cpp:162</a></div></div>
<div class="ttc" id="namespacelsd__slam_html_acf3dc1f9ec3f9f5e03c54c750afde3c5"><div class="ttname"><a href="../../dc/dca/namespacelsd__slam.html#acf3dc1f9ec3f9f5e03c54c750afde3c5">lsd_slam::relocalizationTH</a></div><div class="ttdeci">float relocalizationTH</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/settings_8cpp_source.html#l00101">settings.cpp:101</a></div></div>
<div class="ttc" id="classSophus_1_1SE3Group_html"><div class="ttname"><a href="../../dd/d3d/classSophus_1_1SE3Group.html">Sophus::SE3Group</a></div><div class="ttdoc">SE3 default type - Constructors and default storage for SE3 Type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d4b/se3_8hpp_source.html#l00034">se3.hpp:34</a></div></div>
<div class="ttc" id="settings_8h_html_a3ffc6f50c9be9c3ab5433bcac5b73316"><div class="ttname"><a href="../../de/d60/settings_8h.html#a3ffc6f50c9be9c3ab5433bcac5b73316">RELOCALIZE_THREADS</a></div><div class="ttdeci">#define RELOCALIZE_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d60/settings_8h_source.html#l00095">settings.h:95</a></div></div>
<div class="ttc" id="namespacelsd__slam_1_1Util_html_a0aefaadcc7a2728f8248cacce2cc352a"><div class="ttname"><a href="../../d8/da0/namespacelsd__slam_1_1Util.html#a0aefaadcc7a2728f8248cacce2cc352a">lsd_slam::Util::displayImage</a></div><div class="ttdeci">void displayImage(const char *windowName, const cv::Mat &amp;image, bool autoSize=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df3/ImageDisplay__OpenCV_8cpp_source.html#l00086">ImageDisplay_OpenCV.cpp:86</a></div></div>
<div class="ttc" id="classlsd__slam_1_1Relocalizer_html_af3d7f56079603b26ceb61560d5e28f44"><div class="ttname"><a href="../../d4/d98/classlsd__slam_1_1Relocalizer.html#af3d7f56079603b26ceb61560d5e28f44">lsd_slam::Relocalizer::~Relocalizer</a></div><div class="ttdeci">~Relocalizer()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df5/Relocalizer_8cpp_source.html#l00049">Relocalizer.cpp:49</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 29 2016 14:56:56 for LSD SLAM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
